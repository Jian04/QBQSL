//=============================================================================
// VisuStella MZ - TiledMZ
// VisuMZ_5_TiledMZ.js
//=============================================================================

var Imported = Imported || {};
Imported.VisuMZ_5_TiledMZ = true;

var VisuMZ = VisuMZ || {};
VisuMZ.TiledMZ = VisuMZ.TiledMZ || {};
VisuMZ.TiledMZ.version = 0.10;

//=============================================================================
 /*:
 * @target MZ
 * @plugindesc [RPG Maker MZ] [Tier 5] [Version 0.10] [TiledMZ]
 * @author VisuStella / Daniel "Kaliya" Deptula
 *
 * @help
 * ============================================================================
 * Introduction
 * ============================================================================
 *
 * A warning: This plugin is for advanced users, or users who plan to learn
 * TileD. If you think learning a new mapping program may be too hard, or 
 * might be too tedious this plugin is not for you.
 *
 * Tired of RPG Maker MZ's Map Editor? Do you want to map the XP way but more?
 * Tired of Parallax Mapping? Want to do round corners? Want to create a map
 * with basically unlimited layers?
 * 
 * Well, now all those worries are gone! Instead, let's just use the awesome
 * map editor, TileD! Free, easy to use and very flexible Map Editor. Grab it
 * from here: http://www.mapeditor.org/
 * 
 * Features include all (but not limited to) the following:
 * 
 * - Any tile size maps!
 * - Any number of layers!
 * - Manual collision layers!
 * - ...More
 *
 * ============================================================================
 * Requirements
 * ============================================================================
 *
 * This plugin is made for RPG Maker MZ. This will not work in other iterations
 * of RPG Maker.
 *
 * ------ Tier 5 ------
 *
 * This plugin is a Tier 1 plugin. Place it under other plugins of lower tier
 * value on your Plugin Manager list (ie: 0, 1, 2, 3, 4, 5). This is to ensure
 * that your plugins will have the best compatibility with the rest of the
 * VisuStella MZ library.
 *
 * ============================================================================
 * Major Changes
 * ============================================================================
 *
 * This plugin adds some new hard-coded features to RPG Maker MZ's functions.
 * The following is a list of them.
 *
 * ---
 *
 * TileD Mapping
 * 
 * - Maps can now be made via the mapping program TileD. This allows you the
 * user to create maps with any number of layers using any tile sized desired.
 * Please see the dedicated sections for more information.
 * ---
 *
 * ============================================================================
 * Setting up
 * ============================================================================
 * TileD Maps and Tilesets are stored in the YOUR_PROJECT_FOLDER/Maps folder. 
 * This folder does not exists by default, so you will need to create it.
 *
 * This plugin comes with a few Map and Tileset Templates. The Tileset Templates
 * contain tilesets with predefined Collision, Region, and Flag tiles. You may
 * use these tilesets or create your own for use within your maps.
 *
 * Maps and Tilesets from TileD are exported as JSON and put in here with the
 * format of MapXXX.json where XXX is the ID of the map, for map files.
 *
 * ============================================================================
 * Special Layers
 * ============================================================================
 *
 * This plugin uses special layers to specify certain properties.
 *
 * ---
 * Region Layer
 *
 * This is a layer with the property regionId. You can have any number of these
 * layers.
 *
 * If this layer has a number value (e.g: 2) that means no matter what tile you
 * draw on this layer those tiles will have that specified regionId.
 *
 * If this layer has the value of tile-base that means the individual tiles
 * will check for a property called regionId to specify that tiles region.
 * See the Special Tilesets section for more information.
 *
 * ---
 * Collision Layer 
 * 
 * This is a layer with the property collision. You can have any number of
 * these layers. They dictate where the player and other entites can move to.
 *
 * If this layer has a value of tile-base than the collision for this layer is
 * based on the tiles painted. See the special tilesets section for more info.
 *
 * Other valid values are as followed:
 *
 * full - Any area of this layer cannot be walked upon from any direction.
 * 
 * up-left - Any area of this layer can only be walked upon from the bottom or right.
 *
 * up-right - Any area of this layer can only be walked upon from the bottom or left.
 *
 * down-left - Any area of this layer can be walked upon from the top or right.
 *
 * down-right - Any area of this layer can only be walked upon from top or left.
 *
 * toLevel - specifies the tiles from this layer will transfer the player to the
 * specified level. If this value is "tile-base" it will utilize the tiles
 * that are painted on the layer to determine what map level to transfer the
 * player to.
 * 
 * ---
 * Reflection Layer
 * 
 * This is a special object layer with the property reflectionCast. Objects on
 * this layer will reflect the character sprites either above or below the
 * character's position on the Y axis based on the value. Negative values will
 * reflect the character that many tiles away above the character, and positive
 * values will reflect the character that many tiles away below the character.
 * Players must enter the objects bounds for reflection to occur.
 * 
 * ---
 * Mirror Layer
 * 
 * This is a special object layer similar to the Reflection Layer with a bit more
 * control. This is an object layer defined by having the property mirrorCast
 * this property doesn't need a value, it need only exists. Mirroring is controlled
 * by the objects on this layers properties. Objects on the layer with the property
 * mirror will utilize a string value of x,y coordinates. (e.g: mirror: 0,1)
 * These coordinates are the offset for where to cast the mirrored sprites image.
 * Mirrored sprites will also mirror the characters up and down directions,
 * so if the character is facing up the mirrored sprite will utilize the down
 * facing sprite and vice versa.
 *
 * ============================================================================
 * Additional Layer Properties
 * ============================================================================
 *
 * These properties provide additional layer functionality.
 * 
 * They are listed in the format LAYER TYPE - PROPERTY NAME - PROPERTY TYPE
 * To properly utilize this plugin, the property type has to be the specified type
 * below, otherwise the feature may not work correctly, and at worst case the
 * plugin will not function. When reporting issues, please make sure all your
 * properties are of the proper type, with valid values before making a bug
 * report.
 * 
 * ---
 * ALL - zIndex - int
 *
 * This property specifies the draw order of the layer. A higher value means it
 * is higher in the order. 
 *
 * ---
 * ALL - priority - int
 *
 * This property specifies the draw order for the layer when it shares a zIndex.
 *
 * ---
 * ALL - level - int
 *
 * This property specifies the level that this layer is on for multi-level maps.
 *
 * ---
 * ALL - hideOnLevel - int
 * 
 * This property specifies that this layer will be hidden if the player is on
 * the specified level. (e.g: if this has a value of 1, and the player is on
 * a spot with level set to 1, this layer is hidden). If a spot has multiple
 * levels assigned to it, it will fallback to the one with higher priority.
 * ---
 *
 * TILE - toLevel - string
 * 
 * This property specifies how the transition to different levels will work.
 * If the value is tile-base then when the player steps on a tile with the
 * property "level" then the player will be transfered to that level specified
 * by the tile. If the value is any integer (e.g: 2) then the player will be
 * transfered to that level when they step on any non-blank tile on this layer.
 * ---
 * 
 * ALL - blendMode - string
 * 
 * This property specifies the blend mode for this layer. By default all layers
 * will utilize the blend mode normal, which is to say nothing special will 
 * happen. Supported blend modes are ADD, NORMAL, MULTIPLY, SUBTRACT, and SCREEN
 * ---
 * 
 * ALL - hiddenInGame - boolean
 * 
 * If this property exists it determines whether the layer will be rendered in
 * the game. If the value is true, the layer will not be rendered. If false the
 * layer will be rendered.
 * ---
 * 
 * OBJECT - reflectionCast - int
 * 
 * This property is used on object layers to specify that, that layer will cause
 * a sprite reflection to ocurr when a character enters the reflection area.
 * If the value is a positive the reflection will ocurr below the character,
 * by that many tiles (e.g: value of 2 will show the reflection sprite 2 tiles
 * away below). Negative values will show the reflection above the character.
 * ---
 * 
 * OBJECT - mirrorCast - any value
 * 
 * This property just needs to exists with a valid value, all it does is specify
 * that the object layer is a mirroring layer. The mirroring properties are
 * controlled by the objects on that layer with the property mirror.
 *      
 *      mirror - string
 *      
 *      This property is a property that goes on the objects of an object layer
 * marked by having the property mirrorCast. The format is x,y (e.g: 0,-1) it
 * specifies which tile relative to the characters tile will get the mirrored
 * sprite shown.
 * ---
 * 
 * IMAGE - lockLocation - boolean
 * 
 * This property specifies whether the image displayed will be locked in place
 * or not. If the value is true, the image will be locked to the screen at the
 * given location and will move out of view as the player moves away from it. 
 * If the value is false the image will follow the player and always be in view.
 * ---
 * IMAGE - speedX - float
 * 
 * This property specifies the speed on the x axis which the image scrolls and
 * tiles.
 * ---
 * IMAGE - speedY - float
 * 
 * This property specifies the speed on the y axis which the image scrolls and
 * tiles.
 * ---
 * IMAGE - scrollX - float
 * 
 * This property specifies the x for the origin of the tiling on the image.
 * ---
 * IMAGE - scrollY - float
 * 
 * This property specifies the y for the origin of the tiling on the image.
 * --- 
 *  
 * 
 * 
 * ============================================================================
 * Special Tilesets
 * ============================================================================
 *
 * This plugin uses specialized tilesets with special properties attached to
 * their tiles to handle things such as collision, region id's, and tile flags.
 * below is an explanation of each of these tilesets and how to set them up.
 *
 * ---
 * Region Tileset
 *
 * This is a tileset where each tile has a custom property called regionId
 * the value of this property is a number specifiying this tiles region. 
 * Draw with this tileset on a layer with the property regionId with 
 * a value of tile-base for that position on the map to have that tiles region
 * id. You can only have 1 region per tile.
 * 
 * ---
 * Terrain Tileset
 * 
 * This is a tileset where each tile has a custom property called terrainTag
 * the value of this property is a number specifiying this tiles terrain. 
 * Draw with this tileset on a layer with the property terrainTag with 
 * a value of tile-base for that position on the map to have that tiles region
 * id. You can only have 1 terrain per "level" on any given XY even if it 
 * is on a different tiled layer.
 *
 * ---
 * Collision Tileset
 *
 * This is a tileset where each tile has a custom property defining their
 * collision value for use with tile-base collision layers.
 *
 * The tiles have a property the option to have the following properties.
 *
 * collision - Same as the property on layers.
 * 
 * toLevel - Specifies that when the player touches this tile they will be
 * "transfered" to the specified map level.
 *
 * arrowImpassable - This property specifies that the directions given in the
 * string cannot be passed through. It is formated as:
 *
 * direction1 & direction2 & direction3
 *
 * e.g: down & left & right
 * This example dictates that the only direction the player can move from this
 * tile is up.
 *
 * ---
 * Flag Tilesets
 *
 * This is a tileset that has tiles that specify the special RPG Maker flags.
 * These tiles have any of the following properties.
 *
 * ladder - This tile acts as a ladder.
 * damage - This tile is a damage tile
 * bush - This tile acts as a bush.
 * counter - This tile acts as a counter
 *
 * When using flags, please add the property, 'hiddenInGame'
 * to hide the tileset from appearing.
 *
 * ============================================================================
 * Terms of Use
 * ============================================================================
 *
 * 1. These plugins may be used in free or commercial games provided that they
 * have been acquired through legitimate means at VisuStella.com and/or any
 * other official approved VisuStella sources. Exceptions and special
 * circumstances that may prohibit usage will be listed on VisuStella.com.
 * 
 * 2. All of the listed coders found in the Credits section of this plugin must
 * be given credit in your games or credited as a collective under the name:
 * "VisuStella".
 * 
 * 3. You may edit the source code to suit your needs, so long as you do not
 * claim the source code belongs to you. VisuStella also does not take
 * responsibility for the plugin if any changes have been made to the plugin's
 * code, nor does VisuStella take responsibility for user-provided custom code
 * used for custom control effects including advanced JavaScript notetags
 * and/or plugin parameters that allow custom JavaScript code.
 * 
 * 4. You may NOT redistribute these plugins nor take code from this plugin to
 * use as your own. These plugins and their code are only to be downloaded from
 * VisuStella.com and other official/approved VisuStella sources. A list of
 * official/approved sources can also be found on VisuStella.com.
 *
 * 5. VisuStella is not responsible for problems found in your game due to
 * unintended usage, incompatibility problems with plugins outside of the
 * VisuStella MZ library, plugin versions that aren't up to date, nor
 * responsible for the proper working of compatibility patches made by any
 * third parties. VisuStella is not responsible for errors caused by any
 * user-provided custom code used for custom control effects including advanced
 * JavaScript notetags and/or plugin parameters that allow JavaScript code.
 *
 * 6. If a compatibility patch needs to be made through a third party that is
 * unaffiliated with VisuStella that involves using code from the VisuStella MZ
 * library, contact must be made with a member from VisuStella and have it
 * approved. The patch would be placed on VisuStella.com as a free download
 * to the public. Such patches cannot be sold for monetary gain, including
 * commissions, crowdfunding, and/or donations.
 *
 * ============================================================================
 * Credits
 * ============================================================================
 * 
 * If you are using this plugin, credit the following people in your game:
 * 
 * Team VisuStella
 * * Daniel "Kaliya" Deptula
 *
 * ============================================================================
 * Changelog
 * ============================================================================
 *
 * Version 0.01:
 * - Beta Release!
 *
 * ============================================================================
 * End of Helpfile
 * ============================================================================
 *
 * @ --------------------------------------------------------------------------
 *
 * @command ShowPictureAtZ
 * @text Show Picture At Z
 * @desc Shows the given picture at the given z-index.
 *
 * @arg PictureID:num
 * @text Picture ID
 * @type number
 * @desc Select the picture id to use.
 * @default 0
 *
 * @arg ZIndex:num
 * @text Z-Index
 * @type number
 * @desc Change the z-index of the picture.
 * @default 0
 *
 * @ --------------------------------------------------------------------------
 * 
 * @command SetCurrentMapLevel
 * @text Set Map Level
 * @desc Sets the current level of the map.
 *
 * @arg Level:num
 * @text Level
 * @type number
 * @desc Select the level to change to.
 * @default 0
 *
 * @ ==========================================================================
 * @ Plugin Parameters
 * @ ==========================================================================
 *
 * @param BreakHead
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param TiledMZ
 * @default Plugin Parameters
 *
 * @param ATTENTION
 * @default READ THE HELP FILE
 *
 * @param BreakSettings
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param BushDepth:num
 * @text Bush Depth
 * @type number
 * @desc Depth of bushes.
 * @default 12
 *
 * @param PriorityTileLimit:num
 * @text Priority Tiles Limit
 * @type number
 * @desc Max number of priority tiles.
 * @default 256
 *
 * 
 *
 * @param BreakEnd1
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param End Of
 * @default Plugin Parameters
 *
 * @param BreakEnd2
 * @text --------------------------
 * @default ----------------------------------
 *
 */
//=============================================================================

//=============================================================================
// Setup Plugin Parameters
//=============================================================================
const _0x57f72e=_0x35ef;(function(_0x18851a,_0x15be1f){const _0xe6445=_0x35ef,_0x11ce52=_0x18851a();while(!![]){try{const _0x24e460=-parseInt(_0xe6445(0x295))/0x1*(parseInt(_0xe6445(0x194))/0x2)+-parseInt(_0xe6445(0x252))/0x3*(parseInt(_0xe6445(0x1fb))/0x4)+parseInt(_0xe6445(0x318))/0x5+parseInt(_0xe6445(0x2e0))/0x6+-parseInt(_0xe6445(0x29c))/0x7*(parseInt(_0xe6445(0x243))/0x8)+-parseInt(_0xe6445(0x1a4))/0x9*(parseInt(_0xe6445(0x1bb))/0xa)+parseInt(_0xe6445(0x2d3))/0xb;if(_0x24e460===_0x15be1f)break;else _0x11ce52['push'](_0x11ce52['shift']());}catch(_0x2f2e0d){_0x11ce52['push'](_0x11ce52['shift']());}}}(_0x66d7,0x7c9aa));var label=_0x57f72e(0x2e5),tier=tier||0x5,dependencies=[],pluginData=$plugins[_0x57f72e(0x310)](function(_0x3f3123){const _0x15779c=_0x57f72e;return _0x3f3123[_0x15779c(0x2fb)]&&_0x3f3123[_0x15779c(0x19c)][_0x15779c(0x270)]('['+label+']');})[0x0];VisuMZ[label]['Settings']=VisuMZ[label]['Settings']||{},VisuMZ[_0x57f72e(0x2c3)]=function(_0x560bee,_0x535515){const _0x4f23eb=_0x57f72e;for(const _0x2116b7 in _0x535515){if(_0x2116b7[_0x4f23eb(0x230)](/(.*):NUM/i))_0x560bee[String(RegExp['$1'])]=Number(_0x535515[_0x2116b7])||0x0;if(_0x2116b7[_0x4f23eb(0x230)](/(.*):EVAL/i))_0x560bee[String(RegExp['$1'])]=eval(_0x535515[_0x2116b7]);if(_0x2116b7['match'](/(.*):JSON/i))_0x560bee[String(RegExp['$1'])]=JSON['parse'](_0x535515[_0x2116b7]);if(_0x2116b7[_0x4f23eb(0x230)](/(.*):FUNC/i))_0x560bee[String(RegExp['$1'])]=new Function(JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]));if(_0x2116b7[_0x4f23eb(0x230)](/(.*):STRUCT/i)){var _0x2387b6=String(RegExp['$1']),_0xe29921=JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]);_0x560bee[_0x2387b6]={},VisuMZ[_0x4f23eb(0x2c3)](_0x560bee[_0x2387b6],_0xe29921);}else _0x2116b7['match'](/(.*):STR/i)&&(_0x560bee[String(RegExp['$1'])]=String(_0x535515[_0x2116b7])||'');if(_0x2116b7[_0x4f23eb(0x230)](/(.*):ARRAYNUM/i)){var _0x4ef0d1=JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]);_0x560bee[String(RegExp['$1'])]=_0x4ef0d1;for(var _0x5a9e5d=0x0;_0x5a9e5d<_0x4ef0d1[_0x4f23eb(0x28a)];_0x5a9e5d++){_0x4ef0d1[_0x5a9e5d]=Number(_0x4ef0d1[_0x5a9e5d]);}}if(_0x2116b7[_0x4f23eb(0x230)](/(.*):ARRAYEVAL/i)){var _0x4ef0d1=JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]);_0x560bee[String(RegExp['$1'])]=_0x4ef0d1;for(var _0x5a9e5d=0x0;_0x5a9e5d<_0x4ef0d1[_0x4f23eb(0x28a)];_0x5a9e5d++){_0x4ef0d1[_0x5a9e5d]=eval(_0x4ef0d1[_0x5a9e5d]);}}if(_0x2116b7[_0x4f23eb(0x230)](/(.*):ARRAYJSON/i)){var _0x4ef0d1=JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]);_0x560bee[String(RegExp['$1'])]=_0x4ef0d1;for(var _0x5a9e5d=0x0;_0x5a9e5d<_0x4ef0d1['length'];_0x5a9e5d++){_0x4ef0d1[_0x5a9e5d]=JSON['parse'](_0x4ef0d1[_0x5a9e5d]);}}if(_0x2116b7[_0x4f23eb(0x230)](/(.*):ARRAYFUNC/i)){var _0x4ef0d1=JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]);_0x560bee[String(RegExp['$1'])]=_0x4ef0d1;for(var _0x5a9e5d=0x0;_0x5a9e5d<_0x4ef0d1['length'];_0x5a9e5d++){_0x4ef0d1[_0x5a9e5d]=new Function(JSON[_0x4f23eb(0x1ce)](_0x4ef0d1[_0x5a9e5d]));}}if(_0x2116b7[_0x4f23eb(0x230)](/(.*):ARRAYSTRUCT/i)){var _0x4ef0d1=JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]);_0x560bee[String(RegExp['$1'])]=_0x4ef0d1;for(var _0x5a9e5d=0x0;_0x5a9e5d<_0x4ef0d1['length'];_0x5a9e5d++){var _0xe29921=JSON['parse'](_0x4ef0d1[_0x5a9e5d]);_0x4ef0d1[_0x5a9e5d]={},VisuMZ[_0x4f23eb(0x2c3)](_0x4ef0d1[_0x5a9e5d],_0xe29921);}}else _0x2116b7[_0x4f23eb(0x230)](/(.*):ARRAYSTR/i)&&(_0x560bee[String(RegExp['$1'])]=JSON[_0x4f23eb(0x1ce)](_0x535515[_0x2116b7]));}return _0x560bee;},(_0x1f2da0=>{const _0xc68a93=_0x57f72e,_0x39a73c=_0x1f2da0[_0xc68a93(0x209)];for(const _0x46a651 of dependencies){if(!Imported[_0x46a651]){alert(_0xc68a93(0x29d)['format'](_0x39a73c,_0x46a651)),SceneManager[_0xc68a93(0x24f)]();break;}}const _0x503fe6=_0x1f2da0[_0xc68a93(0x19c)];if(_0x503fe6[_0xc68a93(0x230)](/\[Version[ ](.*?)\]/i)){const _0x18e996=Number(RegExp['$1']);_0x18e996!==VisuMZ[label][_0xc68a93(0x208)]&&(alert(_0xc68a93(0x238)['format'](_0x39a73c,_0x18e996)),SceneManager[_0xc68a93(0x24f)]());}if(_0x503fe6[_0xc68a93(0x230)](/\[Tier[ ](\d+)\]/i)){const _0x2cf47f=Number(RegExp['$1']);_0x2cf47f<tier?(alert('%1\x20is\x20incorrectly\x20placed\x20on\x20the\x20plugin\x20list.\x0aIt\x20is\x20a\x20Tier\x20%2\x20plugin\x20placed\x20over\x20other\x20Tier\x20%3\x20plugins.\x0aPlease\x20reorder\x20the\x20plugin\x20list\x20from\x20smallest\x20to\x20largest\x20tier\x20numbers.'['format'](_0x39a73c,_0x2cf47f,tier)),SceneManager[_0xc68a93(0x24f)]()):tier=Math[_0xc68a93(0x2e3)](_0x2cf47f,tier);}VisuMZ['ConvertParams'](VisuMZ[label][_0xc68a93(0x213)],_0x1f2da0['parameters']);})(pluginData),PluginManager[_0x57f72e(0x200)](pluginData[_0x57f72e(0x209)],'ShowPictureAtZ',_0x2c65d2=>{const _0x5457a0=_0x57f72e;VisuMZ[_0x5457a0(0x2c3)](_0x2c65d2,_0x2c65d2);const _0x25f230=_0x2c65d2[_0x5457a0(0x2c4)],_0x387758=_0x2c65d2['ZIndex'],_0x3cd24c=SceneManager[_0x5457a0(0x210)];if(_0x3cd24c&&_0x3cd24c instanceof Scene_Map){const _0x5c4cc7=_0x3cd24c[_0x5457a0(0x1dd)],_0x387445=_0x5c4cc7&&_0x5c4cc7[_0x5457a0(0x1b6)]?_0x5c4cc7[_0x5457a0(0x1b6)]:null;if(_0x387445!==null){const _0x1c0b46=_0x5c4cc7[_0x5457a0(0x2e2)];if(_0x1c0b46){let _0x3f4997=_0x1c0b46[_0x5457a0(0x2be)]['find'](_0x4d907e=>_0x4d907e['_pictureId']===_0x25f230);_0x3f4997?(_0x1c0b46[_0x5457a0(0x2ee)](_0x3f4997),_0x3f4997['z']=_0x3f4997[_0x5457a0(0x2bf)]=_0x387758,_0x387445[_0x5457a0(0x284)](_0x3f4997)):(_0x3f4997=_0x387445['children'][_0x5457a0(0x205)](_0x1aafd7=>_0x1aafd7[_0x5457a0(0x1f3)]===_0x25f230),_0x3f4997&&(_0x387445['removeChild'](_0x3f4997),_0x3f4997['z']=_0x3f4997['zIndex']=_0x387758,_0x387445['addChild'](_0x3f4997)));}}}}),PluginManager['registerCommand'](pluginData['name'],'SetCurrentMapLevel',_0x141131=>{const _0x77242f=_0x57f72e;VisuMZ[_0x77242f(0x2c3)](_0x141131,_0x141131);const _0x51dbf1=_0x141131[_0x77242f(0x212)],_0xc19f24=SceneManager[_0x77242f(0x210)];_0xc19f24&&_0xc19f24 instanceof Scene_Map&&($gameMap['currentMapLevel']=_0x51dbf1);}),VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x2e9)]=function(_0x3b52cd,_0x1e8ba8){const _0x1e8055=_0x57f72e;if(!_0x3b52cd)return null;let _0x5d34d3=_0x3b52cd[_0x1e8055(0x205)](function(_0x24fb58){const _0xbb1a18=_0x1e8055;return _0x24fb58['name'][_0xbb1a18(0x2ad)]()==_0x1e8ba8[_0xbb1a18(0x2ad)]();});if(_0x5d34d3){if(typeof _0x5d34d3['value']===_0x1e8055(0x27d))_0x5d34d3[_0x1e8055(0x1c3)][_0x1e8055(0x304)]();return _0x5d34d3[_0x1e8055(0x1c3)];}else return null;},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x1e9)]=function(_0x4f0407){const _0x1bf343=_0x57f72e;let _0x45e856=0x0;const _0x538337=$gameMap[_0x1bf343(0x2a9)][_0x1bf343(0x1a8)];for(let _0x43b4d8=0x0;_0x43b4d8<_0x538337['length'];++_0x43b4d8){const _0x182834=_0x538337[_0x43b4d8];if(_0x4f0407<_0x182834[_0x1bf343(0x2dd)]||_0x4f0407>=_0x182834['firstgid']+_0x182834[_0x1bf343(0x274)]){_0x45e856++;continue;}break;}return _0x45e856;},VisuMZ[_0x57f72e(0x2e5)]['trimExt']=function(_0x597b69){return _0x597b69['replace'](/\.[^/.]+$/,'');},VisuMZ[_0x57f72e(0x2e5)]['parseBoolean']=function(_0xe4f4e5){const _0x241f98=_0x57f72e;return _0xe4f4e5===!![]||typeof _0xe4f4e5==='string'&&_0xe4f4e5[_0x241f98(0x2ad)]()===_0x241f98(0x25b);},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x2ff)]=function(_0x428d49){const _0x22466e=_0x57f72e;if(_0x428d49===undefined)return null;for(const _0x306b50 of $gameMap['tiledData'][_0x22466e(0x301)]){if(_0x306b50&&_0x306b50['id']===_0x428d49)return _0x306b50;}return null;},VisuMZ['TiledMZ'][_0x57f72e(0x2d4)]=function(_0x263503){const _0x5591de=_0x57f72e;if(_0x263503===undefined)return PIXI[_0x5591de(0x222)][_0x5591de(0x2ec)];switch(_0x263503[_0x5591de(0x2ad)]()){case _0x5591de(0x2bc):return PIXI[_0x5591de(0x222)][_0x5591de(0x2ec)];case _0x5591de(0x25d):return PIXI[_0x5591de(0x222)][_0x5591de(0x292)];case _0x5591de(0x23f):return PIXI[_0x5591de(0x222)][_0x5591de(0x302)];case _0x5591de(0x2b9):return PIXI['BLEND_MODES']['MULTIPLY'];case _0x5591de(0x280):return PIXI[_0x5591de(0x222)][_0x5591de(0x297)];default:return PIXI[_0x5591de(0x222)][_0x5591de(0x2ec)];}return PIXI[_0x5591de(0x222)][_0x5591de(0x2ec)];},DataManager[_0x57f72e(0x2ae)]=null,DataManager[_0x57f72e(0x214)]=![],DataManager['_tilesetToLoad']=0x0,DataManager[_0x57f72e(0x315)]=-0x1,VisuMZ['TiledMZ'][_0x57f72e(0x2b2)]=DataManager[_0x57f72e(0x300)],DataManager[_0x57f72e(0x300)]=function(_0x27f6e5){const _0x41f718=_0x57f72e;if(this[_0x41f718(0x315)]===_0x27f6e5&&this[_0x41f718(0x2ae)]!==undefined){this[_0x41f718(0x214)]=!![];return;}VisuMZ['TiledMZ'][_0x41f718(0x2b2)][_0x41f718(0x1a2)](this,_0x27f6e5),this[_0x41f718(0x281)](_0x27f6e5);},DataManager[_0x57f72e(0x281)]=function(_0x13944a){const _0x5ae5e9=_0x57f72e;this['_tiledLoaded']=![],this[_0x5ae5e9(0x315)]=_0x13944a;const _0xdf5a74=new XMLHttpRequest(),_0x365dd9=_0x13944a+_0x5ae5e9(0x2c7),_0x578104=_0x5ae5e9(0x296)+_0x365dd9;_0xdf5a74[_0x5ae5e9(0x28b)](_0x5ae5e9(0x246),_0x578104),_0xdf5a74[_0x5ae5e9(0x27e)](_0x5ae5e9(0x1d9)),_0xdf5a74[_0x5ae5e9(0x1c0)]=()=>this[_0x5ae5e9(0x2bd)](_0xdf5a74,name,_0x365dd9,_0x578104),_0xdf5a74['onerror']=()=>this[_0x5ae5e9(0x2db)](name,_0x365dd9,_0x578104),_0xdf5a74[_0x5ae5e9(0x224)]();},DataManager[_0x57f72e(0x2bd)]=function(_0x259f31,_0x5a8b58,_0x371517,_0x56d34e){const _0x3cc559=_0x57f72e;_0x259f31['status']<0x190?(this[_0x3cc559(0x24e)](JSON[_0x3cc559(0x1ce)](_0x259f31[_0x3cc559(0x2fd)])),this[_0x3cc559(0x2a0)](),this[_0x3cc559(0x214)]=!![]):this['onXhrError'](_0x5a8b58,_0x371517,_0x56d34e);},DataManager[_0x57f72e(0x24e)]=function(_0xca526b){const _0x350173=_0x57f72e;if(_0xca526b['layers']){const _0x15b507=[];this[_0x350173(0x244)](_0xca526b,_0x15b507),_0xca526b[_0x350173(0x301)]=_0x15b507,this[_0x350173(0x2ae)]=_0xca526b;}},DataManager[_0x57f72e(0x244)]=function(_0x22ddae,_0x18c898){const _0x58b0ad=_0x57f72e,_0xcc6280=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x22ddae[_0x58b0ad(0x28c)],_0x58b0ad(0x266))||0x0,_0x2faeb7=VisuMZ['TiledMZ']['propertyValue'](_0x22ddae[_0x58b0ad(0x28c)],_0x58b0ad(0x308))||-0x1,_0x58df2e=VisuMZ['TiledMZ'][_0x58b0ad(0x2e9)](_0x22ddae[_0x58b0ad(0x28c)],_0x58b0ad(0x2bf))||0x0,_0x420516=VisuMZ['TiledMZ'][_0x58b0ad(0x2e9)](_0x22ddae[_0x58b0ad(0x28c)],'hiddenInGame')||![],_0x200f27=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x22ddae[_0x58b0ad(0x28c)],'blendMode')||undefined,_0x4404b1=VisuMZ['TiledMZ']['propertyValue'](_0x22ddae['properties'],_0x58b0ad(0x1ea))||undefined,_0x4ec10c=VisuMZ['TiledMZ'][_0x58b0ad(0x2e9)](_0x22ddae[_0x58b0ad(0x28c)],_0x58b0ad(0x30f))||undefined,_0x476cb8=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x22ddae['properties'],_0x58b0ad(0x242))||undefined,_0x44716d=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x22ddae[_0x58b0ad(0x28c)],'toLevel')||undefined,_0x3ac74f=_0x22ddae[_0x58b0ad(0x301)];for(let _0x38ccc1=0x0;_0x38ccc1<_0x3ac74f[_0x58b0ad(0x28a)];++_0x38ccc1){const _0x1d2636=_0x3ac74f[_0x38ccc1];if(_0x1d2636['type']!==_0x58b0ad(0x217)){const _0xe01045=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x1d2636['properties'],'level')||undefined,_0xf726d0=VisuMZ['TiledMZ'][_0x58b0ad(0x2e9)](_0x1d2636[_0x58b0ad(0x28c)],_0x58b0ad(0x308))||undefined,_0x14b269=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x1d2636[_0x58b0ad(0x28c)],_0x58b0ad(0x2bf))||undefined,_0x5f062b=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x1d2636[_0x58b0ad(0x28c)],_0x58b0ad(0x2ca))||undefined,_0x481487=VisuMZ['TiledMZ'][_0x58b0ad(0x2e9)](_0x1d2636[_0x58b0ad(0x28c)],_0x58b0ad(0x1de))||undefined,_0x18b8bd=VisuMZ['TiledMZ'][_0x58b0ad(0x2e9)](_0x1d2636[_0x58b0ad(0x28c)],_0x58b0ad(0x1ea))||undefined,_0x10da05=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x1d2636[_0x58b0ad(0x28c)],'regionId')||undefined,_0x153ee4=VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2e9)](_0x1d2636[_0x58b0ad(0x28c)],'collision')||undefined,_0x2fd84f=VisuMZ['TiledMZ']['propertyValue'](_0x1d2636[_0x58b0ad(0x28c)],_0x58b0ad(0x21b))||undefined;_0x1d2636[_0x58b0ad(0x266)]=_0xe01045||_0xcc6280,_0x1d2636['hideOnLevel']=_0xf726d0||_0x2faeb7,_0x1d2636['zIndex']=_0x14b269||_0x58df2e,_0x1d2636[_0x58b0ad(0x2ca)]=_0x5f062b||_0x420516,_0x1d2636[_0x58b0ad(0x1de)]=_0x481487?VisuMZ[_0x58b0ad(0x2e5)][_0x58b0ad(0x2d4)](_0x481487):VisuMZ[_0x58b0ad(0x2e5)]['strToBlendMode'](_0x200f27),_0x1d2636[_0x58b0ad(0x1ea)]=_0x18b8bd||_0x4404b1,_0x1d2636[_0x58b0ad(0x30f)]=_0x10da05||_0x4ec10c,_0x1d2636[_0x58b0ad(0x242)]=_0x153ee4||_0x476cb8,_0x1d2636[_0x58b0ad(0x21b)]=_0x2fd84f||_0x44716d,_0x18c898[_0x58b0ad(0x226)](_0x1d2636);}else this[_0x58b0ad(0x244)]['call'](this,_0x1d2636,_0x18c898);}},DataManager[_0x57f72e(0x2a0)]=function(){const _0x5912ec=_0x57f72e,_0x50480a=this[_0x5912ec(0x2ae)][_0x5912ec(0x1a8)];for(let _0x5d2918=0x0,_0x4c2a12=_0x50480a[_0x5912ec(0x28a)];_0x5d2918<_0x4c2a12;++_0x5d2918){const _0x53b3cd=_0x50480a[_0x5d2918];if(!_0x53b3cd[_0x5912ec(0x2d8)])continue;this[_0x5912ec(0x255)]++;const _0xdb8a81=VisuMZ['TiledMZ'][_0x5912ec(0x1b0)](_0x53b3cd[_0x5912ec(0x2d8)]),_0x57508d=new XMLHttpRequest(),_0xd31b92=_0x53b3cd['source'],_0x4f8a8b=_0x5912ec(0x23b)+_0xd31b92;_0x57508d[_0x5912ec(0x28b)]('GET',_0x4f8a8b),_0x57508d[_0x5912ec(0x27e)]('application/json'),_0x57508d[_0x5912ec(0x1c0)]=()=>this[_0x5912ec(0x2fc)](_0x53b3cd,_0x57508d,_0xdb8a81,_0xd31b92,_0x4f8a8b),_0x57508d[_0x5912ec(0x1cd)]=()=>this[_0x5912ec(0x2db)](_0xdb8a81,_0xd31b92,_0x4f8a8b),_0x57508d['send']();}},DataManager['onXhrTilesetLoad']=function(_0x123bcc,_0x504eed,_0x85b4db,_0xdadf5b,_0x4df1cb){const _0x4152d1=_0x57f72e;_0x504eed[_0x4152d1(0x2fb)]<0x190?(Object['assign'](_0x123bcc,JSON[_0x4152d1(0x1ce)](_0x504eed[_0x4152d1(0x2fd)])),this[_0x4152d1(0x1e2)](_0x123bcc)):this[_0x4152d1(0x2db)](_0x85b4db,_0xdadf5b,_0x4df1cb),this['_tilesetToLoad']--;},DataManager[_0x57f72e(0x1e2)]=function(_0x327e08){const _0x556373=_0x57f72e;if(!_0x327e08[_0x556373(0x225)])return;_0x327e08[_0x556373(0x28d)]={};const _0x51ec22=Object[_0x556373(0x2b6)](_0x327e08[_0x556373(0x225)]);for(let _0x13cfe4=0x0,_0x51b3cc=_0x51ec22[_0x556373(0x28a)];_0x13cfe4<_0x51b3cc;++_0x13cfe4){const _0x2544e8=_0x51ec22[_0x13cfe4];if(!_0x2544e8['properties'])continue;const _0x3c77d1=Object[_0x556373(0x2b6)](_0x2544e8[_0x556373(0x28c)]),_0x28f5df={};for(let _0x2fc70c=0x0,_0x4b0b07=_0x3c77d1[_0x556373(0x28a)];_0x2fc70c<_0x4b0b07;++_0x2fc70c){const _0x2fc97e=_0x3c77d1[_0x2fc70c];_0x28f5df[_0x2fc97e['name']]=_0x2fc97e[_0x556373(0x1c3)];}_0x327e08[_0x556373(0x28d)][_0x2544e8['id']]=_0x28f5df;}},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x285)]=DataManager['isMapLoaded'],DataManager[_0x57f72e(0x2c2)]=function(){const _0x2a22df=_0x57f72e,_0x7e937=this[_0x2a22df(0x255)]<=0x0;return this[_0x2a22df(0x214)]&&_0x7e937&&VisuMZ['TiledMZ'][_0x2a22df(0x285)][_0x2a22df(0x1a2)](this);},ImageManager['loadTiledTileset']=function(_0x5aed6c){const _0x360565=_0x57f72e;if(!_0x5aed6c)return this['_emptyBitmap'];let _0x36bbae=_0x5aed6c[_0x360565(0x1f8)]('/');_0x36bbae['shift']();const _0x34b877=VisuMZ[_0x360565(0x2e5)][_0x360565(0x1b0)](_0x36bbae[_0x360565(0x2a3)]()),_0x74af75=_0x36bbae['join']('/')+'/';return this['loadBitmap'](_0x74af75,_0x34b877);},ImageManager['loadTiledParallax']=function(_0x32826f){const _0x53f9d4=_0x57f72e;if(!_0x32826f)return this[_0x53f9d4(0x23d)];let _0x3962b5=_0x32826f[_0x53f9d4(0x1f8)]('/');_0x3962b5[_0x53f9d4(0x2f5)]();const _0x41335a=VisuMZ[_0x53f9d4(0x2e5)][_0x53f9d4(0x1b0)](_0x3962b5[_0x53f9d4(0x2a3)]()),_0x4a0028=_0x3962b5[_0x53f9d4(0x25e)]('/')+'/';return this[_0x53f9d4(0x27c)](_0x4a0028,_0x41335a);};function Sprite_TiledObject(){const _0x168b65=_0x57f72e;this[_0x168b65(0x309)](...arguments);}Sprite_TiledObject['prototype']=Object[_0x57f72e(0x1c7)](Sprite['prototype']),Sprite_TiledObject[_0x57f72e(0x1bf)][_0x57f72e(0x198)]=Sprite_TiledObject,Sprite_TiledObject[_0x57f72e(0x1bf)]['initialize']=function(_0x45a964){const _0x540f1b=_0x57f72e,_0x2aacbd=ImageManager[_0x540f1b(0x27c)](_0x45a964[_0x540f1b(0x241)],_0x45a964['imageName']);_0x2aacbd['addLoadListener'](this['setInitialAnimation'][_0x540f1b(0x1c5)](this)),Sprite['prototype']['initialize'][_0x540f1b(0x1a2)](this,_0x2aacbd),this[_0x540f1b(0x207)]=![],this[_0x540f1b(0x282)](_0x45a964);},Sprite_TiledObject[_0x57f72e(0x1bf)]['setInitialAnimation']=function(){const _0x143ae5=_0x57f72e;if(!this[_0x143ae5(0x1d0)])return;const _0x2c7e85=this[_0x143ae5(0x1d0)]['_tileData']&&this[_0x143ae5(0x1d0)][_0x143ae5(0x201)]['animation']?this['_data'][_0x143ae5(0x201)][_0x143ae5(0x1a1)][0x0][_0x143ae5(0x2da)]:this[_0x143ae5(0x1d0)][_0x143ae5(0x2d0)],_0x2a849b=this['_data']['_tileWidth'],_0x440d2d=this['_data'][_0x143ae5(0x215)],_0x21a88d=this[_0x143ae5(0x286)]['width']/_0x2a849b,_0x5e63c0=_0x2c7e85%_0x21a88d*_0x2a849b,_0xcae051=Math[_0x143ae5(0x223)](_0x2c7e85/_0x21a88d)*_0x440d2d;this['setFrame'](_0x5e63c0,_0xcae051,_0x2a849b,_0x440d2d);},Sprite_TiledObject['prototype'][_0x57f72e(0x282)]=function(_0x34a77e){const _0x114f00=_0x57f72e;this['_data']=_0x34a77e,this[_0x114f00(0x2af)]=_0x34a77e['x']+_0x34a77e[_0x114f00(0x231)]['x'],this['origY']=_0x34a77e['y']+_0x34a77e[_0x114f00(0x231)]['y'],this[_0x114f00(0x24a)]=$gameMap[_0x114f00(0x211)](),this[_0x114f00(0x215)]=$gameMap[_0x114f00(0x265)](),this[_0x114f00(0x260)]=$gameMap['width']()*$gameMap[_0x114f00(0x211)](),this[_0x114f00(0x221)]=$gameMap['height']()*$gameMap[_0x114f00(0x265)](),this[_0x114f00(0x235)]=_0x34a77e[_0x114f00(0x235)],this[_0x114f00(0x1de)]=_0x34a77e[_0x114f00(0x1de)],this['z']=_0x34a77e['z']||0x0,this['priority']=_0x34a77e[_0x114f00(0x250)]||0x0,this[_0x114f00(0x2f1)]=_0x34a77e[_0x114f00(0x2f1)]||0xff,this[_0x114f00(0x218)][_0x114f00(0x2a5)](0x0,0x1),this[_0x114f00(0x1cb)](),this[_0x114f00(0x207)]=!![];},Sprite_TiledObject[_0x57f72e(0x1bf)]['updateAnim']=function(){const _0x5ea705=_0x57f72e;if(!this[_0x5ea705(0x1d0)]||this[_0x5ea705(0x1d0)]&&!this[_0x5ea705(0x1d0)][_0x5ea705(0x26a)]){this['setInitialAnimation']();return;}const _0x4fc5c5=this[_0x5ea705(0x1d0)][_0x5ea705(0x26a)];_0x4fc5c5[_0x5ea705(0x20d)]-=0x1;if(_0x4fc5c5['duration']<=0x0){_0x4fc5c5['frame']=(_0x4fc5c5[_0x5ea705(0x1f0)]+0x1)%_0x4fc5c5[_0x5ea705(0x1b3)],_0x4fc5c5[_0x5ea705(0x20d)]=_0x4fc5c5[_0x5ea705(0x22c)];const _0xda7bb3=this[_0x5ea705(0x1d0)][_0x5ea705(0x201)][_0x5ea705(0x1a1)][_0x4fc5c5['frame']][_0x5ea705(0x2da)],_0x350605=this[_0x5ea705(0x1d0)]['_tileWidth'],_0x4bbd1b=this[_0x5ea705(0x1d0)][_0x5ea705(0x215)],_0x39552e=this[_0x5ea705(0x286)][_0x5ea705(0x269)]/_0x350605,_0x2a28fa=_0xda7bb3%_0x39552e*_0x350605,_0x337d95=Math['floor'](_0xda7bb3/_0x39552e)*_0x4bbd1b;this[_0x5ea705(0x2e7)](_0x2a28fa,_0x337d95,_0x350605,_0x4bbd1b);}},Sprite_TiledObject[_0x57f72e(0x1bf)]['rotationInit']=function(){const _0x308e1a=_0x57f72e,_0xe32d92=this[_0x308e1a(0x1d0)];let _0x119ee6=0x0,_0x8e3b99=0x0;const _0x4b55d2=_0xe32d92[_0x308e1a(0x269)],_0x5aaef2=_0xe32d92[_0x308e1a(0x26e)],_0x18085a=_0xe32d92['flipHorz']?0x1-this[_0x308e1a(0x218)]['x']:this[_0x308e1a(0x218)]['x'],_0x4ec8e5=_0xe32d92[_0x308e1a(0x2a4)]?this[_0x308e1a(0x218)]['y']:0x1-this[_0x308e1a(0x218)]['y'];let _0x1b907e=0x0,_0x3ca662=0x0;const _0x43b623=_0xe32d92[_0x308e1a(0x235)]||0x0;_0x1b907e=Math[_0x308e1a(0x1ec)](_0x43b623)*_0x4b55d2*_0x18085a+Math[_0x308e1a(0x22e)](_0x43b623)*_0x5aaef2*_0x4ec8e5,_0x3ca662=Math[_0x308e1a(0x22e)](_0x43b623)*_0x4b55d2*_0x18085a-Math['cos'](_0x43b623)*_0x5aaef2*_0x4ec8e5,_0x119ee6+=_0x1b907e,_0x8e3b99+=_0x3ca662,this[_0x308e1a(0x2af)]=Math[_0x308e1a(0x223)](this[_0x308e1a(0x2af)]+_0x119ee6),this[_0x308e1a(0x2cf)]=Math[_0x308e1a(0x223)](this[_0x308e1a(0x2cf)]+_0x8e3b99),this['scale']['x']*=_0xe32d92[_0x308e1a(0x2de)]?-0x1:0x1,this[_0x308e1a(0x232)]['y']*=_0xe32d92['flipVert']?-0x1:0x1;},Sprite_TiledObject[_0x57f72e(0x1bf)]['screenX']=function(){const _0x5a4685=_0x57f72e;var _0x44a9a2=this[_0x5a4685(0x1d0)]['x'],_0x9abac2=$gameMap[_0x5a4685(0x220)];return _0x44a9a2-=_0x9abac2*this[_0x5a4685(0x24a)],_0x44a9a2+this[_0x5a4685(0x269)]<0x0&&$gameMap['isLoopHorizontal']()&&(_0x44a9a2+=this[_0x5a4685(0x260)]),Math[_0x5a4685(0x30d)](_0x44a9a2);},Sprite_TiledObject['prototype'][_0x57f72e(0x264)]=function(){const _0x13786c=_0x57f72e;var _0xcf78fb=this['_data']['y'],_0x4f9d79=$gameMap['_displayY'];return _0xcf78fb-=_0x4f9d79*this[_0x13786c(0x215)],_0xcf78fb+this[_0x13786c(0x26e)]<0x0&&$gameMap[_0x13786c(0x1fd)]()&&(_0xcf78fb+=this[_0x13786c(0x221)]),Math['ceil'](_0xcf78fb);},Sprite_TiledObject[_0x57f72e(0x1bf)]['update']=function(){const _0x44056f=_0x57f72e;Sprite[_0x44056f(0x1bf)][_0x44056f(0x298)][_0x44056f(0x1a2)](this),this[_0x44056f(0x2e4)](),this['x']=this[_0x44056f(0x2af)]-$gameMap[_0x44056f(0x27b)]()*$gameMap['tileWidth'](),this['y']=this[_0x44056f(0x2cf)]-$gameMap[_0x44056f(0x2ed)]()*$gameMap[_0x44056f(0x265)]();};const FLIPPED_HORIZONTALLY_FLAG=0x80000000,FLIPPED_VERTICALLY_FLAG=0x40000000,FLIPPED_DIAGONALLY_FLAG=0x20000000;function TiledTilemap(){const _0x5c7198=_0x57f72e;this[_0x5c7198(0x309)](...arguments);}TiledTilemap[_0x57f72e(0x1bf)]=Object[_0x57f72e(0x1c7)](Tilemap[_0x57f72e(0x1bf)]),TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x198)]=TiledTilemap,TiledTilemap[_0x57f72e(0x1bf)]['initialize']=function(_0xa94fd9){const _0x28e4e7=_0x57f72e;this[_0x28e4e7(0x258)]={},this[_0x28e4e7(0x272)]=[],this[_0x28e4e7(0x23c)]=[],this[_0x28e4e7(0x2d6)]=0x0,this[_0x28e4e7(0x2e6)]=[],this[_0x28e4e7(0x1ac)]=![],this[_0x28e4e7(0x2a9)]=_0xa94fd9,$gameMap[_0x28e4e7(0x27f)](),Tilemap[_0x28e4e7(0x1bf)][_0x28e4e7(0x309)][_0x28e4e7(0x1a2)](this),this[_0x28e4e7(0x229)]();},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x229)]=function(){const _0x184f9b=_0x57f72e;this[_0x184f9b(0x1fc)](),this[_0x184f9b(0x1e6)]();},TiledTilemap[_0x57f72e(0x1bf)]['_setupSize']=function(){const _0x4f7514=_0x57f72e,_0x140d1f=this['_width'],_0x2e589d=this['_height'];this[_0x4f7514(0x24a)]=this[_0x4f7514(0x2a9)][_0x4f7514(0x1bd)],this[_0x4f7514(0x215)]=this[_0x4f7514(0x2a9)][_0x4f7514(0x314)];const _0x28ed8d=Math['ceil'](_0x140d1f/this[_0x4f7514(0x24a)])+0x1,_0x2f549c=Math['ceil'](_0x2e589d/this[_0x4f7514(0x215)])+0x1;this[_0x4f7514(0x1c2)]=_0x28ed8d*this['_tileWidth'],this[_0x4f7514(0x1a5)]=_0x2f549c*this[_0x4f7514(0x215)],this[_0x4f7514(0x260)]=this[_0x4f7514(0x2a9)][_0x4f7514(0x269)],this[_0x4f7514(0x221)]=this[_0x4f7514(0x2a9)][_0x4f7514(0x26e)];},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x1e6)]=function(){const _0x459568=_0x57f72e;this[_0x459568(0x271)]={};const _0x3fc572=this[_0x459568(0x2a9)][_0x459568(0x1a8)];for(const _0x35556f of _0x3fc572){if(!_0x35556f[_0x459568(0x225)])continue;for(const _0x495cf7 of _0x35556f[_0x459568(0x225)]){const _0x33f4d8=_0x495cf7['id'],_0x51134c=_0x495cf7[_0x459568(0x1a1)];if(!_0x51134c)continue;const _0x47ba8c=_0x51134c[0x0][_0x459568(0x20d)]/0x3e8*0x3c,_0x39112e=_0x51134c[_0x459568(0x28a)];this[_0x459568(0x271)][_0x33f4d8]={'frame':0x0,'maxFrame':_0x39112e,'duration':_0x47ba8c,'maxDuration':_0x47ba8c};}}},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x311)]=function(_0x9e3dc4){const _0x405e74=_0x57f72e;if(_0x9e3dc4[_0x405e74(0x279)]!==_0x405e74(0x303))return![];if(!!_0x9e3dc4['collision']||!!_0x9e3dc4[_0x405e74(0x21b)]||!!_0x9e3dc4[_0x405e74(0x30f)]||_0x9e3dc4[_0x405e74(0x2ca)]===!![])return![];return!![];},TiledTilemap['prototype'][_0x57f72e(0x1b1)]=function(_0x6cb0f7){return _0x6cb0f7&&_0x6cb0f7['z']===0x3&&_0x6cb0f7['priority']>0x0;},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x21e)]=function(_0x387ce0){const _0x445237=_0x57f72e;return _0x387ce0[_0x445237(0x279)]===_0x445237(0x2bb)&&!!_0x387ce0[_0x445237(0x28c)]&&VisuMZ[_0x445237(0x2e5)]['propertyValue'](_0x387ce0[_0x445237(0x28c)],_0x445237(0x1ea))!==null;},TiledTilemap[_0x57f72e(0x1bf)]['_createLayers']=function(){const _0x85971=_0x57f72e;let _0x1e1b0f=0x0;this['refresh']();const _0x11c371=this[_0x85971(0x2a9)][_0x85971(0x301)];for(const _0x119432 of _0x11c371){if(!this[_0x85971(0x311)](_0x119432)){_0x1e1b0f++;continue;}if(this[_0x85971(0x21e)](_0x119432)){_0x1e1b0f++;continue;}const _0x1743e9=new Tilemap[(_0x85971(0x1cf))]();_0x1743e9[_0x85971(0x1aa)]=_0x119432,_0x1743e9[_0x85971(0x1d7)]=_0x1e1b0f,_0x1743e9[_0x85971(0x20b)]=_0x1e1b0f,_0x1743e9[_0x85971(0x250)]=_0x119432['priority']||0x0,_0x1743e9['z']=_0x119432[_0x85971(0x2bf)]||0x0,_0x1743e9[_0x85971(0x1de)]=_0x119432['blendMode'],this[_0x85971(0x272)][_0x85971(0x226)](_0x1743e9),this['addChild'](_0x1743e9),_0x1e1b0f++;}for(let _0x379bff=0x0;_0x379bff<VisuMZ[_0x85971(0x2e5)]['Settings']['PriorityTileLimit'];_0x379bff++){let _0x487469=new Sprite();_0x487469['z']=_0x487469[_0x85971(0x2bf)]=0x3,_0x487469[_0x85971(0x1d7)]=-0x1,_0x487469[_0x85971(0x27a)](),this['addChild'](_0x487469),this['_priorityTiles'][_0x85971(0x226)](_0x487469);}this[_0x85971(0x20e)]=!![],this[_0x85971(0x1cc)]();},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x1cc)]=function(){const _0x1fcfc7=_0x57f72e,_0x3554d1=$gameTemp[_0x1fcfc7(0x2ef)];for(const _0x227aa4 of _0x3554d1){this[_0x1fcfc7(0x2e6)][_0x1fcfc7(0x226)](new Sprite_TiledObject(_0x227aa4));}this[_0x1fcfc7(0x2e6)][_0x1fcfc7(0x28a)]>0x0&&this[_0x1fcfc7(0x284)](...this[_0x1fcfc7(0x2e6)]),this['_objectsCreated']=!![];},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x31a)]=function(_0x639668,_0x398c15){const _0x1b2f5e=_0x57f72e;this['_priorityTilesCount']=0x0;for(const _0x4baf30 of this[_0x1b2f5e(0x272)]){_0x4baf30[_0x1b2f5e(0x2d5)]();if(_0x4baf30[_0x1b2f5e(0x1aa)][_0x1b2f5e(0x308)]!=undefined&&_0x4baf30[_0x1b2f5e(0x1aa)]['hideOnLevel']===$gameMap['currentMapLevel']||!_0x4baf30['layerData'][_0x1b2f5e(0x287)]){_0x4baf30[_0x1b2f5e(0x257)]=![];continue;}this[_0x1b2f5e(0x293)](_0x4baf30,_0x639668,_0x398c15);}while(this['_priorityTilesCount']<this[_0x1b2f5e(0x23c)][_0x1b2f5e(0x28a)]){var _0x8cede2=this[_0x1b2f5e(0x23c)][this[_0x1b2f5e(0x2d6)]];_0x8cede2[_0x1b2f5e(0x27a)](),_0x8cede2['layerId']=-0x1,this[_0x1b2f5e(0x2d6)]++;}},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x293)]=function(_0x58e0f4,_0x3adc75,_0x5e90c2){const _0x2d96e6=_0x57f72e,_0x4b6a33=this[_0x2d96e6(0x269)]+this[_0x2d96e6(0x2c1)]*0x2,_0x2b0469=this[_0x2d96e6(0x26e)]+this[_0x2d96e6(0x2c1)]*0x2,_0x1a8dc8=Math[_0x2d96e6(0x30d)](_0x4b6a33/this[_0x2d96e6(0x24a)])+0x1,_0xe3d991=Math[_0x2d96e6(0x30d)](_0x2b0469/this['_tileHeight'])+0x1;for(let _0x6918a8=0x0;_0x6918a8<_0xe3d991;_0x6918a8++){for(let _0x4bcc09=0x0;_0x4bcc09<_0x1a8dc8;_0x4bcc09++){this[_0x2d96e6(0x2b7)](_0x58e0f4,_0x3adc75,_0x5e90c2,_0x4bcc09,_0x6918a8);}}},TiledTilemap['prototype'][_0x57f72e(0x2b7)]=function(_0x118a00,_0x3cd981,_0x40dc6d,_0x7ad564,_0x4a1132){const _0x57cf18=_0x57f72e,_0x2e2694=_0x3cd981+_0x7ad564,_0x2c33f8=_0x40dc6d+_0x4a1132;this[_0x57cf18(0x2cb)]&&(_0x2e2694=_0x2e2694['mod'](this[_0x57cf18(0x260)]));this[_0x57cf18(0x2ba)]&&(_0x2c33f8=_0x2c33f8[_0x57cf18(0x196)](this['_mapHeight']));let _0x53a8e2=0x0;const _0x3e8530=_0x118a00['layerData'],_0x9c965=this['tiledData'][_0x57cf18(0x1a8)],_0x91356=this['_mapWidth'],_0x12f9cf=this['_mapHeight'];if(_0x2e2694>=0x0&&_0x2e2694<_0x91356&&_0x2c33f8>=0x0&&_0x2c33f8<_0x12f9cf)_0x53a8e2=_0x2e2694+_0x2c33f8*this['_mapWidth'];else return;let _0x2a5e98=_0x3e8530[_0x57cf18(0x2cc)][_0x53a8e2];if(!_0x2a5e98)return;const _0x4fb9b5=_0x2a5e98&FLIPPED_HORIZONTALLY_FLAG,_0x3cabe9=_0x2a5e98&FLIPPED_VERTICALLY_FLAG,_0x2903fb=_0x2a5e98&FLIPPED_DIAGONALLY_FLAG;let _0x3bc1ac=0x0;if(_0x4fb9b5&&_0x2903fb&&_0x3cabe9)_0x3bc1ac=0xe;else{if(_0x4fb9b5&&_0x2903fb)_0x3bc1ac=0x6;else{if(_0x4fb9b5&&_0x3cabe9)_0x3bc1ac=0x4;else{if(_0x3cabe9&&_0x2903fb)_0x3bc1ac=0x2;else{if(_0x4fb9b5)_0x3bc1ac=0xc;else{if(_0x3cabe9)_0x3bc1ac=0x8;else _0x2903fb&&(_0x3bc1ac=0xa);}}}}}_0x2a5e98&=~(FLIPPED_HORIZONTALLY_FLAG|FLIPPED_VERTICALLY_FLAG|FLIPPED_DIAGONALLY_FLAG);const _0x4f5639=VisuMZ['TiledMZ'][_0x57cf18(0x1e9)](_0x2a5e98),_0x184d28=_0x7ad564*this[_0x57cf18(0x24a)],_0x2b73c5=_0x4a1132*this['_tileHeight'],_0x1222f9=_0x9c965[_0x4f5639],_0x1d094c=_0x1222f9[_0x57cf18(0x1bd)],_0x52e051=_0x1222f9[_0x57cf18(0x314)],_0x456fe7=_0x1222f9[_0x57cf18(0x1e4)],_0x2d3993=this['_getAnimationTileId'](_0x4f5639,_0x2a5e98-_0x1222f9[_0x57cf18(0x2dd)]),_0x3b306b=_0x2d3993%_0x456fe7*_0x1d094c,_0xa90ae2=Math[_0x57cf18(0x223)](_0x2d3993/_0x456fe7)*_0x52e051;if(this[_0x57cf18(0x1b1)](_0x118a00)){this[_0x57cf18(0x202)](_0x118a00,_0x4f5639,_0x2a5e98,_0x3cd981,_0x40dc6d,_0x184d28,_0x2b73c5);return;}_0x118a00[_0x57cf18(0x240)](_0x4f5639,_0x3b306b,_0xa90ae2,_0x184d28,_0x2b73c5,_0x1d094c,_0x52e051,_0x3bc1ac);},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x202)]=function(_0x8e6807,_0x4a3da6,_0x220b6d,_0x375db6,_0x19b00b,_0x744ca8,_0x44a84a){const _0x31bf68=_0x57f72e,_0x197815=this[_0x31bf68(0x2a9)][_0x31bf68(0x1a8)][_0x4a3da6],_0x10d8e2=_0x197815[_0x31bf68(0x1bd)],_0x4e9959=_0x197815[_0x31bf68(0x314)],_0x480a6e=_0x197815[_0x31bf68(0x1e4)],_0x43c1fd=this[_0x31bf68(0x2df)](_0x4a3da6,_0x220b6d-_0x197815['firstgid']),_0x53fdf0=_0x43c1fd%_0x480a6e*_0x10d8e2,_0x3eca3b=Math[_0x31bf68(0x223)](_0x43c1fd/_0x480a6e)*_0x4e9959,_0xcf8d28=this['_priorityTiles'][this[_0x31bf68(0x2d6)]],_0x135cd9=_0x8e6807['layerData'],_0x29f345=_0x135cd9?_0x135cd9['offsetx']||0x0:0x0,_0x31008d=_0x135cd9?_0x135cd9[_0x31bf68(0x2c9)]||0x0:0x0;let _0x10257c=this[_0x31bf68(0x1c1)]['x'],_0x13d85a=this['origin']['y'];if(this[_0x31bf68(0x2d6)]>=this['_priorityTiles']['length'])return;_0xcf8d28['layerId']=_0x8e6807[_0x31bf68(0x1d7)],_0xcf8d28[_0x31bf68(0x218)]['x']=0.5,_0xcf8d28['anchor']['y']=0x1,_0xcf8d28[_0x31bf68(0x2af)]=_0x744ca8,_0xcf8d28[_0x31bf68(0x2cf)]=_0x44a84a,_0xcf8d28['x']=_0xcf8d28[_0x31bf68(0x2af)]+_0x375db6*this[_0x31bf68(0x24a)]-_0x10257c+_0x29f345+_0x10d8e2/0x2,_0xcf8d28['y']=_0xcf8d28[_0x31bf68(0x2cf)]+_0x19b00b*this['_tileHeight']-_0x13d85a+_0x31008d+_0x4e9959,_0xcf8d28[_0x31bf68(0x286)]=this[_0x31bf68(0x2a6)][_0x4a3da6],_0xcf8d28[_0x31bf68(0x2e7)](_0x53fdf0,_0x3eca3b,_0x10d8e2,_0x4e9959),_0xcf8d28[_0x31bf68(0x250)]=_0x8e6807[_0x31bf68(0x250)],_0xcf8d28['z']=_0xcf8d28['zIndex']=_0x8e6807['z'],_0xcf8d28['show'](),this['_priorityTilesCount']+=0x1;},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x19b)]=function(){const _0x405426=_0x57f72e;if(this[_0x405426(0x1fe)]&&this[_0x405426(0x29b)]()){for(let _0x2ef192=0x0;_0x2ef192<this['_layers'][_0x405426(0x28a)];++_0x2ef192){const _0x1f33bf=this[_0x405426(0x272)][_0x2ef192];_0x1f33bf[_0x405426(0x1a6)](this[_0x405426(0x2a6)]);}this[_0x405426(0x1fe)]=![],this[_0x405426(0x20e)]=!![];}},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x2f2)]=function(){const _0xc29e31=_0x57f72e,_0x1c84c4=Math[_0xc29e31(0x30d)](this[_0xc29e31(0x1c1)]['x']),_0x44b9c9=Math[_0xc29e31(0x30d)](this[_0xc29e31(0x1c1)]['y']),_0x561f84=Math[_0xc29e31(0x223)]((_0x1c84c4-this[_0xc29e31(0x2c1)])/this[_0xc29e31(0x24a)]),_0x460655=Math['floor']((_0x44b9c9-this[_0xc29e31(0x2c1)])/this[_0xc29e31(0x215)]);this[_0xc29e31(0x290)](_0x561f84,_0x460655,_0x1c84c4,_0x44b9c9),(this[_0xc29e31(0x20e)]||this[_0xc29e31(0x216)]!==this[_0xc29e31(0x203)]||this[_0xc29e31(0x21a)]!==_0x561f84||this[_0xc29e31(0x1be)]!==_0x460655)&&(this['_lastAnimationFrame']=this[_0xc29e31(0x203)],this[_0xc29e31(0x21a)]=_0x561f84,this[_0xc29e31(0x1be)]=_0x460655,this[_0xc29e31(0x31a)](_0x561f84,_0x460655),this[_0xc29e31(0x20e)]=![]),this[_0xc29e31(0x319)](),PIXI[_0xc29e31(0x237)][_0xc29e31(0x1bf)][_0xc29e31(0x2f2)]['call'](this);},TiledTilemap[_0x57f72e(0x1bf)][_0x57f72e(0x290)]=function(_0x57b9b4,_0x1b2d2a,_0x3db3db,_0x50fd31){const _0x319724=_0x57f72e;for(const _0x3568f1 of this[_0x319724(0x272)]){_0x3568f1['x']=_0x57b9b4*this['_tileWidth']-_0x3db3db,_0x3568f1['y']=_0x1b2d2a*this[_0x319724(0x215)]-_0x50fd31;}for(const _0xa149ae of this['_priorityTiles']){const _0x1fbf8c=this[_0x319724(0x2a9)][_0x319724(0x301)][_0xa149ae[_0x319724(0x1d7)]],_0x455137=_0x1fbf8c?_0x1fbf8c[_0x319724(0x1ed)]||0x0:0x0,_0x3fa831=_0x1fbf8c?_0x1fbf8c['offsety']||0x0:0x0;_0xa149ae['x']=_0xa149ae[_0x319724(0x2af)]+_0x57b9b4*this[_0x319724(0x24a)]-_0x3db3db+_0x455137+_0xa149ae[_0x319724(0x269)]/0x2,_0xa149ae['y']=_0xa149ae['origY']+_0x1b2d2a*this[_0x319724(0x215)]-_0x50fd31+_0x3fa831+_0xa149ae['height'];}},TiledTilemap[_0x57f72e(0x1bf)]['update']=function(){const _0x3d620f=_0x57f72e;Tilemap[_0x3d620f(0x1bf)][_0x3d620f(0x298)][_0x3d620f(0x1a2)](this),this[_0x3d620f(0x1f2)]();},TiledTilemap[_0x57f72e(0x1bf)]['_updateAnimation']=function(){const _0x3e641d=_0x57f72e;let _0x35a0eb=![];for(const _0x2b812a in this[_0x3e641d(0x271)]){this['_animationData'][_0x2b812a][_0x3e641d(0x20d)]-=0x1,this[_0x3e641d(0x271)][_0x2b812a]['duration']<=0x0&&(this[_0x3e641d(0x271)][_0x2b812a][_0x3e641d(0x1f0)]=(this[_0x3e641d(0x271)][_0x2b812a]['frame']+0x1)%this['_animationData'][_0x2b812a][_0x3e641d(0x1b3)],this[_0x3e641d(0x271)][_0x2b812a][_0x3e641d(0x20d)]=this[_0x3e641d(0x271)][_0x2b812a][_0x3e641d(0x22c)],_0x35a0eb=!![]);}_0x35a0eb&&this['refresh']();},TiledTilemap[_0x57f72e(0x1bf)]['_getAnimationTileId']=function(_0xd9e0ed,_0x20049a){const _0x21ecc9=_0x57f72e,_0x325fad=this[_0x21ecc9(0x2a9)][_0x21ecc9(0x1a8)][_0xd9e0ed][_0x21ecc9(0x225)];if(!_0x325fad)return _0x20049a;const _0x341af0=this['_getTileData'](_0x325fad,_0x20049a);if(!_0x341af0)return _0x20049a;if(!_0x341af0['animation'])return _0x20049a;const _0x1d6099=_0x341af0[_0x21ecc9(0x1a1)],_0x2d1a15=this['_animationData'][_0x20049a][_0x21ecc9(0x1f0)];if(!_0x2d1a15)return _0x20049a;return _0x1d6099[_0x2d1a15][_0x21ecc9(0x2da)];},TiledTilemap[_0x57f72e(0x1bf)]['_getTileData']=function(_0x1e5c6d,_0x2ec302){for(const _0x380e28 of _0x1e5c6d){if(_0x380e28&&_0x380e28['id']===_0x2ec302)return _0x380e28;}return null;},TiledTilemap[_0x57f72e(0x1bf)]['_compareChildOrder']=function(_0x1ecce0,_0x3f7a57){const _0x38e70d=_0x57f72e;if(_0x1ecce0['z']!==_0x3f7a57['z'])return _0x1ecce0['z']-_0x3f7a57['z'];else{if(_0x1ecce0[_0x38e70d(0x250)]!==_0x3f7a57[_0x38e70d(0x250)])return _0x1ecce0[_0x38e70d(0x250)]-_0x3f7a57[_0x38e70d(0x250)];else{if(_0x1ecce0['y']!==_0x3f7a57['y'])return _0x1ecce0['y']-_0x3f7a57['y'];else return _0x1ecce0['x']!==_0x3f7a57['x']?_0x1ecce0['x']-_0x3f7a57['x']:_0x1ecce0['spriteId']-_0x3f7a57[_0x38e70d(0x20b)];}}},TiledTilemap['prototype'][_0x57f72e(0x21f)]=function(){const _0x56c44b=_0x57f72e;if(!this['_objectsCreated'])return![];for(const _0x4dcc6f of this[_0x56c44b(0x2e6)]){if(!_0x4dcc6f[_0x56c44b(0x207)])return![];}return!![];},Object['defineProperties'](Tilemap[_0x57f72e(0x1cf)][_0x57f72e(0x1bf)],{'blendMode':{'set':function(_0x1d987f){const _0x2407ff=_0x57f72e;this[_0x2407ff(0x1f4)][_0x2407ff(0x1de)]=_0x1d987f;},'get':function(){const _0x319cb2=_0x57f72e;return this['_state'][_0x319cb2(0x1de)];}}}),Tilemap[_0x57f72e(0x1cf)][_0x57f72e(0x1bf)][_0x57f72e(0x240)]=function(_0x3d53ec,_0x3a2476,_0x5db04f,_0x5cb0a1,_0x49bc9b,_0x23ba38,_0x376329,_0x246f8e){const _0x338690=_0x57f72e;_0x246f8e===undefined&&(_0x246f8e=0x0),this[_0x338690(0x22d)]['push']([_0x3d53ec,_0x3a2476,_0x5db04f,_0x5cb0a1,_0x49bc9b,_0x23ba38,_0x376329,_0x246f8e]);},Tilemap[_0x57f72e(0x1cf)][_0x57f72e(0x1bf)][_0x57f72e(0x25f)]=function(){const _0x3b4e4f=_0x57f72e,_0x1dfa59=this['_elements']['length'],_0x2f5a94=_0x1dfa59*Tilemap[_0x3b4e4f(0x1cf)][_0x3b4e4f(0x307)];this[_0x3b4e4f(0x28e)][_0x3b4e4f(0x28a)]<_0x2f5a94&&(this[_0x3b4e4f(0x28e)]=new Float32Array(_0x2f5a94*0x2));const _0x15399e=this['_vertexArray'];let _0x5253f0=0x0;for(const _0x2e9fb4 of this[_0x3b4e4f(0x22d)]){const _0x141e21=_0x2e9fb4[0x0],_0x35a90c=_0x141e21>>0x2,_0x1e132e=0x400*(_0x141e21&0x1),_0xe5fa9d=0x400*(_0x141e21>>0x1&0x1),_0x3a45b8=_0x2e9fb4[0x1]+_0x1e132e,_0x4ceb56=_0x2e9fb4[0x2]+_0xe5fa9d,_0x454664=_0x2e9fb4[0x3],_0x19c99c=_0x2e9fb4[0x4],_0x4039e3=_0x2e9fb4[0x5],_0x37d29b=_0x2e9fb4[0x6];let _0x26ed6b=_0x2e9fb4[0x7];const _0x2ac94a=_0x3a45b8+0.5,_0x36a8a6=_0x4ceb56+0.5,_0x41d89f=_0x3a45b8+_0x4039e3-0.5,_0x5c3f1f=_0x4ceb56+_0x37d29b-0.5;let _0x2f5b75=_0x3a45b8,_0x743a2b=_0x4ceb56,_0x19d798=_0x3a45b8+_0x4039e3,_0x4ebec3=_0x4ceb56,_0x31347d=_0x3a45b8+_0x4039e3,_0x1c91a6=_0x4ceb56+_0x37d29b,_0x5adea9=_0x3a45b8,_0x3b83b3=_0x4ceb56+_0x37d29b;if(_0x26ed6b!==0x0){const _0x301c97=PIXI[_0x3b4e4f(0x278)];let _0x17fe47=_0x4039e3/0x2,_0x5800fe=_0x37d29b/0x2;_0x26ed6b%0x4!==0x0&&(_0x17fe47=_0x37d29b/0x2,_0x5800fe=_0x4039e3/0x2);const _0x383444=_0x3a45b8+_0x17fe47,_0x89eccf=_0x4ceb56+_0x5800fe;_0x26ed6b=_0x301c97[_0x3b4e4f(0x25d)](_0x26ed6b,_0x301c97['NW']),_0x2f5b75=_0x383444+_0x17fe47*_0x301c97['uX'](_0x26ed6b),_0x743a2b=_0x89eccf+_0x5800fe*_0x301c97['uY'](_0x26ed6b),_0x26ed6b=_0x301c97['add'](_0x26ed6b,0x2),_0x19d798=_0x383444+_0x17fe47*_0x301c97['uX'](_0x26ed6b),_0x4ebec3=_0x89eccf+_0x5800fe*_0x301c97['uY'](_0x26ed6b),_0x26ed6b=_0x301c97[_0x3b4e4f(0x25d)](_0x26ed6b,0x2),_0x31347d=_0x383444+_0x17fe47*_0x301c97['uX'](_0x26ed6b),_0x1c91a6=_0x89eccf+_0x5800fe*_0x301c97['uY'](_0x26ed6b),_0x26ed6b=_0x301c97['add'](_0x26ed6b,0x2),_0x5adea9=_0x383444+_0x17fe47*_0x301c97['uX'](_0x26ed6b),_0x3b83b3=_0x89eccf+_0x5800fe*_0x301c97['uY'](_0x26ed6b);}_0x15399e[_0x5253f0++]=_0x35a90c,_0x15399e[_0x5253f0++]=_0x2ac94a,_0x15399e[_0x5253f0++]=_0x36a8a6,_0x15399e[_0x5253f0++]=_0x41d89f,_0x15399e[_0x5253f0++]=_0x5c3f1f,_0x15399e[_0x5253f0++]=_0x2f5b75,_0x15399e[_0x5253f0++]=_0x743a2b,_0x15399e[_0x5253f0++]=_0x454664,_0x15399e[_0x5253f0++]=_0x19c99c,_0x15399e[_0x5253f0++]=_0x35a90c,_0x15399e[_0x5253f0++]=_0x2ac94a,_0x15399e[_0x5253f0++]=_0x36a8a6,_0x15399e[_0x5253f0++]=_0x41d89f,_0x15399e[_0x5253f0++]=_0x5c3f1f,_0x15399e[_0x5253f0++]=_0x19d798,_0x15399e[_0x5253f0++]=_0x4ebec3,_0x15399e[_0x5253f0++]=_0x454664+_0x4039e3,_0x15399e[_0x5253f0++]=_0x19c99c,_0x15399e[_0x5253f0++]=_0x35a90c,_0x15399e[_0x5253f0++]=_0x2ac94a,_0x15399e[_0x5253f0++]=_0x36a8a6,_0x15399e[_0x5253f0++]=_0x41d89f,_0x15399e[_0x5253f0++]=_0x5c3f1f,_0x15399e[_0x5253f0++]=_0x31347d,_0x15399e[_0x5253f0++]=_0x1c91a6,_0x15399e[_0x5253f0++]=_0x454664+_0x4039e3,_0x15399e[_0x5253f0++]=_0x19c99c+_0x37d29b,_0x15399e[_0x5253f0++]=_0x35a90c,_0x15399e[_0x5253f0++]=_0x2ac94a,_0x15399e[_0x5253f0++]=_0x36a8a6,_0x15399e[_0x5253f0++]=_0x41d89f,_0x15399e[_0x5253f0++]=_0x5c3f1f,_0x15399e[_0x5253f0++]=_0x5adea9,_0x15399e[_0x5253f0++]=_0x3b83b3,_0x15399e[_0x5253f0++]=_0x454664,_0x15399e[_0x5253f0++]=_0x19c99c+_0x37d29b;}this[_0x3b4e4f(0x193)][_0x3b4e4f(0x298)](_0x15399e);};function TiledImageInfo(){const _0x4891e6=_0x57f72e;this[_0x4891e6(0x309)](...arguments);}TiledImageInfo[_0x57f72e(0x1bf)][_0x57f72e(0x309)]=function(_0x557173){const _0x5ea075=_0x57f72e;this[_0x5ea075(0x1e3)]=_0x557173['image'],this[_0x5ea075(0x2f7)]=_0x557173['id'],this['zIndex']=_0x557173['zIndex'],this['priority']=_0x557173['priority'],this[_0x5ea075(0x2d7)]=_0x557173[_0x5ea075(0x1ed)]||0x0,this[_0x5ea075(0x2b4)]=_0x557173[_0x5ea075(0x2c9)]||0x0,this['x']=_0x557173['x']||0x0,this['y']=_0x557173['y']||0x0,this['visible']=_0x557173[_0x5ea075(0x2ca)]!==undefined?!_0x557173[_0x5ea075(0x2ca)]:!![],this['blendMode']=_0x557173[_0x5ea075(0x1de)],this[_0x5ea075(0x1d0)]=_0x557173,this['_lockLocation']=!![],this[_0x5ea075(0x28c)](_0x557173[_0x5ea075(0x28c)]);},TiledImageInfo['prototype'][_0x57f72e(0x28c)]=function(_0x28230a){const _0x438d4a=_0x57f72e,_0x1f2762=VisuMZ['TiledMZ'][_0x438d4a(0x2e9)](_0x28230a,_0x438d4a(0x23e))||0x0;if(_0x1f2762!==undefined)this['_speedX']=parseFloat(_0x1f2762);const _0x391c97=VisuMZ[_0x438d4a(0x2e5)]['propertyValue'](_0x28230a,_0x438d4a(0x2ea))||0x0;if(_0x391c97!==undefined)this[_0x438d4a(0x29a)]=parseFloat(_0x391c97);const _0x1a4942=VisuMZ[_0x438d4a(0x2e5)]['propertyValue'](_0x28230a,_0x438d4a(0x22b))||0x0;if(_0x1f2762!==undefined)this['_scrollX']=parseFloat(_0x1a4942);const _0x2e6a01=VisuMZ['TiledMZ'][_0x438d4a(0x2e9)](_0x28230a,_0x438d4a(0x1fa))||0x0;if(_0x2e6a01!==undefined)this[_0x438d4a(0x2fa)]=parseFloat(_0x2e6a01);const _0x32e631=VisuMZ['TiledMZ']['propertyValue'](_0x28230a,_0x438d4a(0x253));if(_0x32e631!==undefined)this[_0x438d4a(0x2ac)]=_0x32e631;const _0x19f8b1=VisuMZ['TiledMZ'][_0x438d4a(0x2e9)](_0x28230a,_0x438d4a(0x2f1));if(_0x19f8b1!==undefined)this[_0x438d4a(0x2f1)]=parseInt(_0x19f8b1)||0xff;};function TiledTilingSprite(){this['initialize'](...arguments);}TiledTilingSprite[_0x57f72e(0x1bf)]=Object['create'](TilingSprite[_0x57f72e(0x1bf)]),TiledTilingSprite[_0x57f72e(0x1bf)][_0x57f72e(0x198)]=TiledTilingSprite,TiledTilingSprite[_0x57f72e(0x1bf)]['initialize']=function(_0xc31686){const _0x29f2d7=_0x57f72e,_0x59cf2b=ImageManager[_0x29f2d7(0x233)](_0xc31686[_0x29f2d7(0x1e3)]);TilingSprite['prototype'][_0x29f2d7(0x309)][_0x29f2d7(0x1a2)](this,_0x59cf2b),_0x59cf2b[_0x29f2d7(0x192)](()=>{const _0x903702=_0x29f2d7;this['width']=_0x59cf2b[_0x903702(0x269)],this['height']=_0x59cf2b[_0x903702(0x26e)],this[_0x903702(0x1d8)]=new Point(_0xc31686[_0x903702(0x2d7)],_0xc31686[_0x903702(0x2b4)]);}),this['z']=_0xc31686[_0x29f2d7(0x2bf)],this[_0x29f2d7(0x250)]=_0xc31686[_0x29f2d7(0x250)],this[_0x29f2d7(0x2af)]=_0xc31686['x']+_0xc31686[_0x29f2d7(0x2d7)],this[_0x29f2d7(0x2cf)]=_0xc31686['y']+_0xc31686[_0x29f2d7(0x2b4)],this[_0x29f2d7(0x1c1)]=new Point(_0xc31686[_0x29f2d7(0x294)],_0xc31686['_scrollY']),this['visible']=_0xc31686[_0x29f2d7(0x287)],this['blendMode']=_0xc31686[_0x29f2d7(0x1de)],this[_0x29f2d7(0x2f1)]=_0xc31686[_0x29f2d7(0x2f1)],this['data']=_0xc31686;},TiledTilingSprite[_0x57f72e(0x1bf)][_0x57f72e(0x2e1)]=function(){const _0x1c4de=_0x57f72e;this[_0x1c4de(0x256)]?this[_0x1c4de(0x256)]['addLoadListener'](this[_0x1c4de(0x1d4)][_0x1c4de(0x1c5)](this)):this[_0x1c4de(0x306)]['frame']=new Rectangle();},TiledTilingSprite['prototype'][_0x57f72e(0x28f)]=function(){const _0x27b84b=_0x57f72e,_0x8e3ca8=this[_0x27b84b(0x22f)][_0x27b84b(0x234)]();_0x8e3ca8[_0x27b84b(0x269)]===0x0&&_0x8e3ca8[_0x27b84b(0x26e)]===0x0&&this[_0x27b84b(0x256)]&&(_0x8e3ca8[_0x27b84b(0x269)]=this[_0x27b84b(0x256)][_0x27b84b(0x269)],_0x8e3ca8[_0x27b84b(0x26e)]=this[_0x27b84b(0x256)][_0x27b84b(0x26e)]);if(this[_0x27b84b(0x306)][_0x27b84b(0x2a7)])try{this[_0x27b84b(0x306)][_0x27b84b(0x1f0)]=_0x8e3ca8;}catch(_0x2fce58){this['texture'][_0x27b84b(0x1f0)]=new Rectangle();}this[_0x27b84b(0x306)][_0x27b84b(0x1b5)]++,this[_0x27b84b(0x1b7)]=null;},TiledTilingSprite['prototype'][_0x57f72e(0x298)]=function(){const _0x33b3ad=_0x57f72e;this[_0x33b3ad(0x1c1)]['x']+=this[_0x33b3ad(0x2cc)]['_speedX'],this[_0x33b3ad(0x1c1)]['y']+=this[_0x33b3ad(0x2cc)]['_speedY'],this[_0x33b3ad(0x2cc)][_0x33b3ad(0x2ac)]&&(this['x']=this[_0x33b3ad(0x2af)]-$gameMap['displayX']()*$gameMap[_0x33b3ad(0x211)](),this['y']=this['origY']-$gameMap[_0x33b3ad(0x2ed)]()*$gameMap[_0x33b3ad(0x265)]());};function Game_TiledObject(){this['initialize'](...arguments);}Game_TiledObject[_0x57f72e(0x1bf)][_0x57f72e(0x309)]=function(_0x1252e2){const _0x455411=_0x57f72e;this[_0x455411(0x2b0)](_0x1252e2);},Game_TiledObject[_0x57f72e(0x1bf)][_0x57f72e(0x2b0)]=function(_0x4e66ba){const _0x148680=_0x57f72e;this[_0x148680(0x1d0)]=_0x4e66ba,this[_0x148680(0x2f7)]=_0x4e66ba['id'];let _0x50a88=_0x4e66ba[_0x148680(0x22a)];_0x50a88&=~(FLIPPED_HORIZONTALLY_FLAG|FLIPPED_VERTICALLY_FLAG),this[_0x148680(0x1c9)]=_0x50a88?_0x50a88:undefined,this[_0x148680(0x1b2)]=VisuMZ['TiledMZ'][_0x148680(0x1e9)](_0x50a88);const _0x41921d=$gameMap['tiledData'][_0x148680(0x1a8)][this[_0x148680(0x1b2)]];if(_0x41921d){this['_tileWidth']=_0x41921d[_0x148680(0x1bd)],this[_0x148680(0x215)]=_0x41921d['tileheight'];let _0x12cbbe=_0x41921d[_0x148680(0x239)]['split']('/');this['_tileId']=this[_0x148680(0x1c9)]-_0x41921d[_0x148680(0x2dd)];const _0x5c8474=_0x41921d&&_0x41921d[_0x148680(0x225)]?_0x41921d['tiles'][_0x148680(0x205)](_0x5050a9=>_0x5050a9['id']===this[_0x148680(0x2d0)]):undefined;if(_0x5c8474){const _0x37681a=_0x5c8474[_0x148680(0x1a1)];if(_0x37681a){const _0x596e37=_0x37681a[0x0]['duration']/0x3e8*0x3c,_0x2cb28a=_0x37681a[_0x148680(0x28a)];this[_0x148680(0x26a)]={'frame':0x0,'maxFrame':_0x2cb28a,'duration':_0x596e37,'maxDuration':_0x596e37};}this[_0x148680(0x201)]=_0x5c8474;}_0x12cbbe['shift'](),this[_0x148680(0x20f)]=VisuMZ[_0x148680(0x2e5)][_0x148680(0x1b0)](_0x12cbbe['pop']()),this[_0x148680(0x241)]=_0x12cbbe['join']('/')+'/';}else this[_0x148680(0x20f)]='',this[_0x148680(0x241)]='';this[_0x148680(0x250)]=this[_0x148680(0x1a0)](),this['z']=this[_0x148680(0x2c8)](),this[_0x148680(0x287)]=_0x4e66ba[_0x148680(0x287)]===(undefined||null)?_0x4e66ba[_0x148680(0x287)]:!![],this['x']=_0x4e66ba['x'],this['y']=_0x4e66ba['y'],this['width']=_0x4e66ba[_0x148680(0x269)],this[_0x148680(0x26e)]=_0x4e66ba['height'],this[_0x148680(0x235)]=_0x4e66ba[_0x148680(0x235)]?_0x4e66ba[_0x148680(0x235)]*Math['PI']/0xb4:0x0,this[_0x148680(0x2de)]=!!(_0x4e66ba[_0x148680(0x22a)]&FLIPPED_HORIZONTALLY_FLAG),this[_0x148680(0x2a4)]=!!(_0x4e66ba[_0x148680(0x22a)]&FLIPPED_VERTICALLY_FLAG);const _0x781708=VisuMZ['TiledMZ']['layerFromId'](this[_0x148680(0x1d0)]['layerId']);this[_0x148680(0x218)]=new PIXI[(_0x148680(0x2d1))](0x0,0x1);const _0x335c9e=VisuMZ[_0x148680(0x2e5)][_0x148680(0x2e9)](_0x4e66ba[_0x148680(0x28c)],_0x148680(0x1de));this['blendMode']=VisuMZ[_0x148680(0x2e5)]['strToBlendMode'](_0x335c9e!==null?_0x335c9e:_0x148680(0x313));const _0xd8b984=VisuMZ[_0x148680(0x2e5)][_0x148680(0x2e9)](_0x4e66ba[_0x148680(0x28c)],_0x148680(0x2f1));this[_0x148680(0x2f1)]=parseInt(_0xd8b984)!==NaN?parseInt(_0xd8b984):0xff;if(_0x781708){const _0x11b45a=_0x781708[_0x148680(0x1ed)],_0xc8a482=_0x781708[_0x148680(0x2c9)];this[_0x148680(0x231)]=new PIXI[(_0x148680(0x2d1))](_0x11b45a,_0xc8a482);}else this[_0x148680(0x231)]=new PIXI[(_0x148680(0x2d1))](0x0,0x0);this[_0x148680(0x2d9)]=0x1,this['tint']=0xffffff;},Game_TiledObject['prototype']['_priority']=function(){const _0x32e6ca=_0x57f72e;if(!this['_data'])return 0x0;const _0x2da19b=this[_0x32e6ca(0x1d0)]['layerId'],_0x2b6448=VisuMZ[_0x32e6ca(0x2e5)][_0x32e6ca(0x2ff)](_0x2da19b);if(!_0x2b6448)return 0x0;const _0xa8c95e=_0x2b6448[_0x32e6ca(0x250)];if(_0xa8c95e===undefined)return 0x0;return parseInt(_0xa8c95e);},Game_TiledObject[_0x57f72e(0x1bf)][_0x57f72e(0x2c8)]=function(){const _0x1ece3c=_0x57f72e;if(!this[_0x1ece3c(0x1d0)])return 0x3;const _0x2c9206=this[_0x1ece3c(0x1d0)][_0x1ece3c(0x1d7)],_0x4a0cf4=VisuMZ[_0x1ece3c(0x2e5)][_0x1ece3c(0x2ff)](_0x2c9206);if(!_0x4a0cf4)return 0x3;const _0x153c77=_0x4a0cf4[_0x1ece3c(0x2bf)];if(_0x153c77===undefined)return 0x3;return parseInt(_0x153c77);},Object['defineProperties'](Game_Map[_0x57f72e(0x1bf)],{'tiledData':{'get':()=>DataManager[_0x57f72e(0x2ae)]}}),VisuMZ[_0x57f72e(0x2e5)]['Game_Map_setup']=Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x282)],Game_Map[_0x57f72e(0x1bf)]['setup']=function(_0x40f8aa){const _0x27ff08=_0x57f72e;this['isTiled']()&&(this[_0x27ff08(0x19a)]={},this['_flags']={},this[_0x27ff08(0x273)]=[],this[_0x27ff08(0x275)]=[],this[_0x27ff08(0x19d)]=[],$dataMap['width']=this[_0x27ff08(0x2a9)][_0x27ff08(0x269)],$dataMap['height']=this[_0x27ff08(0x2a9)][_0x27ff08(0x26e)],this[_0x27ff08(0x248)]!==_0x40f8aa&&(this['currentMapLevel']=0x0),this[_0x27ff08(0x2f0)]=this['currentMapLevel']||0x0,this[_0x27ff08(0x27f)]()),VisuMZ['TiledMZ'][_0x27ff08(0x26d)][_0x27ff08(0x1a2)](this,_0x40f8aa);},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1bc)]=function(){const _0x384fbe=_0x57f72e;return!!this[_0x384fbe(0x2a9)];},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x27f)]=function(){const _0x434520=_0x57f72e;this[_0x434520(0x2a8)](0x0),this[_0x434520(0x1ab)](),this[_0x434520(0x2aa)](),this[_0x434520(0x25a)](),this[_0x434520(0x195)]();},Game_Map[_0x57f72e(0x1bf)]['_initializeMapLevel']=function(_0x4a9d42){const _0x1189b2=_0x57f72e,_0x5288df=this['width'](),_0x333d93=this['height'](),_0x866281=_0x5288df*_0x333d93;if(!!this[_0x1189b2(0x19a)][_0x4a9d42])return;const _0x32cb3f=this[_0x1189b2(0x19a)][_0x4a9d42]=[];for(let _0x59ac28=0x0;_0x59ac28<_0x866281;_0x59ac28++){_0x32cb3f['push'](this[_0x1189b2(0x2b1)]());}},Game_Map['prototype'][_0x57f72e(0x2b1)]=function(){return{'full':0x0,'arrow':0x0,'region':0x0,'level':0x0,'toLevel':-0x1};},Game_Map['prototype'][_0x57f72e(0x267)]=function(_0x158d17){const _0x30aa11=_0x57f72e;if(_0x158d17[_0x30aa11(0x279)]!==_0x30aa11(0x26b))return;if(!_0x158d17[_0x30aa11(0x239)])return;const _0xcc1b0d=new TiledImageInfo(_0x158d17);this['_imageInfo'][_0x30aa11(0x226)](_0xcc1b0d);},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1ab)]=function(){const _0x32c970=_0x57f72e;$gameTemp[_0x32c970(0x2ef)]=[];},Game_Map['prototype'][_0x57f72e(0x25a)]=function(){const _0x2f8a37=_0x57f72e;for(const _0x4ff95f of this['tiledData'][_0x2f8a37(0x301)]){if(_0x4ff95f['type']!==_0x2f8a37(0x261))continue;if(!_0x4ff95f[_0x2f8a37(0x28c)])continue;const _0x1e7900=VisuMZ['TiledMZ'][_0x2f8a37(0x2e9)](_0x4ff95f[_0x2f8a37(0x28c)],_0x2f8a37(0x1ea))||undefined;if(_0x1e7900===undefined)continue;const _0x376572=parseInt(_0x4ff95f['zIndex']),_0x13e8f1=parseInt(_0x4ff95f[_0x2f8a37(0x250)]),_0x4f76e5=_0x4ff95f[_0x2f8a37(0x1de)]||'Normal';if(_0x376572===NaN)throw Error('ZIndex\x20Property\x20on\x20layer\x20%s\x20is\x20Not-A-Number.'[_0x2f8a37(0x283)](_0x4ff95f[_0x2f8a37(0x209)]));if(_0x13e8f1===NaN)throw Error(_0x2f8a37(0x1b8)[_0x2f8a37(0x283)](_0x4ff95f['name']));for(const _0x3ae66f of _0x4ff95f[_0x2f8a37(0x20a)]){let _0x102e4b=VisuMZ[_0x2f8a37(0x2e5)][_0x2f8a37(0x2e9)](_0x3ae66f[_0x2f8a37(0x28c)],_0x2f8a37(0x2bf)),_0x5987d0=VisuMZ[_0x2f8a37(0x2e5)]['propertyValue'](_0x3ae66f['properties'],_0x2f8a37(0x250)),_0xd39ba3=VisuMZ[_0x2f8a37(0x2e5)][_0x2f8a37(0x2e9)](_0x3ae66f[_0x2f8a37(0x28c)],_0x2f8a37(0x1de)),_0x3ce74a=VisuMZ[_0x2f8a37(0x2e5)][_0x2f8a37(0x2e9)](_0x3ae66f[_0x2f8a37(0x28c)],_0x2f8a37(0x2f1));_0x102e4b=_0x102e4b!==null?parseInt(_0x102e4b):_0x376572,_0x5987d0=_0x5987d0!==null?parseInt(_0x5987d0):_0x13e8f1,_0xd39ba3=_0xd39ba3!==null?_0xd39ba3:_0x4f76e5,_0x3ce74a=_0x3ce74a!==null?parseInt(_0x3ce74a):0xff;let _0xd3f89e={'x':_0x3ae66f['x'],'y':_0x3ae66f['y'],'width':_0x3ae66f[_0x2f8a37(0x269)],'height':_0x3ae66f[_0x2f8a37(0x26e)]};this[_0x2f8a37(0x275)][_0x2f8a37(0x226)]({'id':_0x3ae66f['id'],'rect':_0xd3f89e,'reflectionCast':_0x1e7900,'zIndex':_0x102e4b,'priority':_0x5987d0,'blendMode':_0xd39ba3,'opacity':_0x3ce74a});}}},Game_Map['prototype'][_0x57f72e(0x195)]=function(){const _0x21e7de=_0x57f72e;for(const _0x5749dc of this[_0x21e7de(0x2a9)][_0x21e7de(0x301)]){if(_0x5749dc[_0x21e7de(0x279)]!==_0x21e7de(0x261))continue;if(!_0x5749dc[_0x21e7de(0x28c)])continue;const _0x167ea6=VisuMZ['TiledMZ'][_0x21e7de(0x2e9)](_0x5749dc[_0x21e7de(0x28c)],_0x21e7de(0x30b))||undefined;if(_0x167ea6===undefined)continue;const _0xf8371e=parseInt(_0x5749dc[_0x21e7de(0x2bf)]),_0x4eadcf=parseInt(_0x5749dc[_0x21e7de(0x250)]),_0x5a9ab2=_0x5749dc[_0x21e7de(0x1de)]||_0x21e7de(0x313);if(_0xf8371e===NaN)throw Error(_0x21e7de(0x1df)[_0x21e7de(0x283)](_0x5749dc[_0x21e7de(0x209)]));if(_0x4eadcf===NaN)throw Error(_0x21e7de(0x1b8)[_0x21e7de(0x283)](_0x5749dc[_0x21e7de(0x209)]));for(const _0x41b39c of _0x5749dc[_0x21e7de(0x20a)]){const _0x42c558=VisuMZ[_0x21e7de(0x2e5)]['propertyValue'](_0x41b39c[_0x21e7de(0x28c)],_0x21e7de(0x29f))||undefined;if(_0x42c558===undefined)continue;const _0x27c3b4=_0x42c558[_0x21e7de(0x1f8)](',');if(_0x27c3b4[_0x21e7de(0x28a)]<0x2){console[_0x21e7de(0x2d2)](_0x21e7de(0x2f9));continue;}let _0x3e335a=VisuMZ[_0x21e7de(0x2e5)][_0x21e7de(0x2e9)](_0x41b39c[_0x21e7de(0x28c)],_0x21e7de(0x2bf)),_0x323b1c=VisuMZ[_0x21e7de(0x2e5)][_0x21e7de(0x2e9)](_0x41b39c[_0x21e7de(0x28c)],_0x21e7de(0x250)),_0x5876e6=VisuMZ[_0x21e7de(0x2e5)]['propertyValue'](_0x41b39c[_0x21e7de(0x28c)],_0x21e7de(0x1de)),_0x39a49e=VisuMZ[_0x21e7de(0x2e5)][_0x21e7de(0x2e9)](_0x41b39c[_0x21e7de(0x28c)],_0x21e7de(0x2f1));_0x3e335a=_0x3e335a!==null?parseInt(_0x3e335a):_0xf8371e,_0x323b1c=_0x323b1c!==null?parseInt(_0x323b1c):_0x4eadcf,_0x5876e6=_0x5876e6!==null?_0x5876e6:_0x5a9ab2,_0x39a49e=_0x39a49e!==null?_0x39a49e:0xff;let _0x3a122f={'x':_0x41b39c['x'],'y':_0x41b39c['y'],'width':_0x41b39c[_0x21e7de(0x269)],'height':_0x41b39c[_0x21e7de(0x26e)]};this['_mirrors'][_0x21e7de(0x226)]({'id':_0x41b39c['id'],'rect':_0x3a122f,'mirrorX':parseInt(_0x27c3b4[0x0]),'mirrorY':parseInt(_0x27c3b4[0x1]),'zIndex':_0x3e335a,'priority':_0x323b1c,'blendMode':_0x5876e6,'opacity':_0x39a49e});}}},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x20c)]=function(_0x1e908e){const _0x106eb0=_0x57f72e,_0xf3eaad=_0x1e908e[_0x106eb0(0x24c)]*this[_0x106eb0(0x211)](),_0x5ea9f5=_0x1e908e['_realY']*this['tileHeight']();if(!this['isTiled']())return![];if(this['_reflection'][_0x106eb0(0x28a)]===0x0)return![];for(const _0xf78268 of this[_0x106eb0(0x275)]){const _0x312c76=_0xf78268[_0x106eb0(0x276)],_0x1b3408=_0xf3eaad>=_0x312c76['x']&&_0xf3eaad<_0x312c76['x']+_0x312c76[_0x106eb0(0x269)]-this[_0x106eb0(0x211)]()*0.8,_0x300bb4=_0x5ea9f5>=_0x312c76['y']&&_0x5ea9f5<_0x312c76['y']+_0x312c76[_0x106eb0(0x26e)];if(_0x1b3408&&_0x300bb4)return!![];}return![];},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x204)]=function(_0x3bd3d7){const _0x180500=_0x57f72e,_0x2a01aa=_0x3bd3d7[_0x180500(0x24c)]*this[_0x180500(0x211)](),_0x60d15e=(_0x3bd3d7[_0x180500(0x1c6)]-0x1)*this[_0x180500(0x265)]();if(!this['isTiled']())return![];if(this[_0x180500(0x19d)][_0x180500(0x28a)]===0x0)return![];for(const _0x210d7b of this['_mirrors']){const _0x2ffb16=_0x210d7b['rect'],_0x39fed9=_0x2a01aa>=_0x2ffb16['x']&&_0x2a01aa<_0x2ffb16['x']+_0x2ffb16[_0x180500(0x269)]-this['tileWidth']()*0.8,_0x39d352=_0x60d15e>=_0x2ffb16['y']&&_0x60d15e<_0x2ffb16['y']+_0x2ffb16[_0x180500(0x26e)];if(_0x39fed9&&_0x39d352)return!![];}return![];},Game_Map['prototype'][_0x57f72e(0x2b8)]=function(_0x5be3f1){const _0xc33505=_0x57f72e,_0x3a8286=_0x5be3f1[_0xc33505(0x24c)]*this[_0xc33505(0x211)](),_0x199a39=_0x5be3f1[_0xc33505(0x1c6)]*this[_0xc33505(0x265)]();let _0x58c8b1=[];for(const _0x209dd1 of this[_0xc33505(0x275)]){const _0xdce62a=_0x209dd1[_0xc33505(0x276)],_0x1ac1ab=_0x3a8286>=_0xdce62a['x']&&_0x3a8286<_0xdce62a['x']+_0xdce62a[_0xc33505(0x269)]-this[_0xc33505(0x211)]()*0.8,_0x30c641=_0x199a39>=_0xdce62a['y']&&_0x199a39<_0xdce62a['y']+_0xdce62a[_0xc33505(0x26e)];if(_0x1ac1ab&&_0x30c641)_0x58c8b1['push'](_0x209dd1);}return _0x58c8b1;},Game_Map['prototype']['getMirrors']=function(_0x43ce61){const _0x8adce2=_0x57f72e,_0x507488=_0x43ce61['_realX']*this[_0x8adce2(0x211)](),_0x36666c=(_0x43ce61[_0x8adce2(0x1c6)]-0x1)*this['tileHeight']();let _0x518fcf=[];for(const _0x1f1f7a of this[_0x8adce2(0x19d)]){const _0x4ae8b9=_0x1f1f7a[_0x8adce2(0x276)],_0xee8628=_0x507488>=_0x4ae8b9['x']&&_0x507488<_0x4ae8b9['x']+_0x4ae8b9[_0x8adce2(0x269)]-this[_0x8adce2(0x211)]()*0.8,_0x2a4a03=_0x36666c>=_0x4ae8b9['y']&&_0x36666c<_0x4ae8b9['y']+_0x4ae8b9[_0x8adce2(0x26e)];if(_0xee8628&&_0x2a4a03)_0x518fcf[_0x8adce2(0x226)](_0x1f1f7a);}return _0x518fcf;},Game_Map[_0x57f72e(0x1bf)]['createTiledObjects']=function(_0x23921b){const _0x8fa5c1=_0x57f72e;if(_0x23921b[_0x8fa5c1(0x279)]!=='objectgroup')return;for(const _0x13418d of _0x23921b[_0x8fa5c1(0x20a)]){_0x13418d[_0x8fa5c1(0x1d7)]=_0x23921b['id'],this[_0x8fa5c1(0x228)](_0x13418d);}},Game_Map[_0x57f72e(0x1bf)]['createTiledObject']=function(_0x47c116){const _0x39875b=_0x57f72e;if(_0x47c116&&_0x47c116[_0x39875b(0x22a)]===undefined)return;const _0x550150=new Game_TiledObject(_0x47c116);$gameTemp[_0x39875b(0x2ef)][_0x39875b(0x226)](_0x550150);},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x2aa)]=function(){const _0x4fbcf1=_0x57f72e,_0x1a7016=this['tiledData'][_0x4fbcf1(0x301)];for(const _0x19b58e of _0x1a7016){if(!_0x19b58e)continue;const _0x46ef8b=VisuMZ['TiledMZ'][_0x4fbcf1(0x2e9)](_0x19b58e[_0x4fbcf1(0x28c)],_0x4fbcf1(0x277));if(_0x46ef8b)continue;this[_0x4fbcf1(0x1ff)](_0x19b58e),_0x19b58e['data']&&this[_0x4fbcf1(0x1d3)](_0x19b58e),this['createTiledObjects'](_0x19b58e),this['_setupImages'](_0x19b58e);}},Game_Map[_0x57f72e(0x1bf)]['_setupLayerProperties']=function(_0x4eeb1b){const _0x7474d6=_0x57f72e,_0x4e9efa=_0x4eeb1b[_0x7474d6(0x28c)],_0x1cf25e=VisuMZ[_0x7474d6(0x2e5)]['propertyValue'](_0x4e9efa,_0x7474d6(0x250));if(_0x1cf25e!=null)_0x4eeb1b[_0x7474d6(0x250)]=parseInt(_0x1cf25e)||0x0;const _0x17aef8=VisuMZ['TiledMZ'][_0x7474d6(0x2e9)](_0x4e9efa,_0x7474d6(0x2bf));if(_0x17aef8!=null)_0x4eeb1b[_0x7474d6(0x2bf)]=parseInt(_0x17aef8)||0x0;const _0x4871d9=VisuMZ[_0x7474d6(0x2e5)]['propertyValue'](_0x4e9efa,_0x7474d6(0x308));if(_0x4871d9!=null)_0x4eeb1b[_0x7474d6(0x308)]=parseInt(_0x4871d9)||0x0;const _0x5d142e=VisuMZ['TiledMZ']['propertyValue'](_0x4e9efa,'level');if(_0x5d142e!=null)_0x4eeb1b[_0x7474d6(0x266)]=parseInt(_0x5d142e)||0x0;const _0x46eba2=VisuMZ[_0x7474d6(0x2e5)][_0x7474d6(0x2e9)](_0x4e9efa,'regionId');if(_0x46eba2!=null)_0x4eeb1b[_0x7474d6(0x30f)]=_0x46eba2;const _0x22bdae=VisuMZ[_0x7474d6(0x2e5)]['propertyValue'](_0x4e9efa,_0x7474d6(0x242));if(_0x22bdae!=null)_0x4eeb1b[_0x7474d6(0x242)]=_0x22bdae;const _0x3c2d00=VisuMZ[_0x7474d6(0x2e5)][_0x7474d6(0x2e9)](_0x4e9efa,_0x7474d6(0x289));if(_0x3c2d00!=null)_0x4eeb1b[_0x7474d6(0x289)]=_0x3c2d00;const _0x52f18e=VisuMZ[_0x7474d6(0x2e5)][_0x7474d6(0x2e9)](_0x4e9efa,_0x7474d6(0x21b));if(_0x52f18e!=null)_0x4eeb1b['toLevel']=_0x52f18e||-0x1;const _0x1c2cbb=VisuMZ[_0x7474d6(0x2e5)][_0x7474d6(0x2e9)](_0x4e9efa,'hiddenInGame');_0x4eeb1b[_0x7474d6(0x2ca)]=_0x1c2cbb;},Game_Map['prototype'][_0x57f72e(0x1d3)]=function(_0x18bd21){const _0x407ccc=_0x57f72e;if(_0x18bd21[_0x407ccc(0x279)]!=='tilelayer')return;const _0x512b27=this[_0x407ccc(0x269)]()*this[_0x407ccc(0x26e)]();this[_0x407ccc(0x2a8)](_0x18bd21[_0x407ccc(0x266)]);for(let _0x1be134=0x0;_0x1be134<_0x512b27;_0x1be134++){this[_0x407ccc(0x2f6)](_0x18bd21,_0x1be134),this[_0x407ccc(0x227)](_0x18bd21,_0x1be134),this['_setupCollision'](_0x18bd21,_0x1be134),this['_setupCollisionArrow'](_0x18bd21,_0x1be134),this[_0x407ccc(0x1ba)](_0x18bd21,_0x1be134);}},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x2f6)]=function(_0x4aab15,_0xca6043){const _0x3e5ca2=_0x57f72e,_0x4d475d=this[_0x3e5ca2(0x2ab)](_0x4aab15[_0x3e5ca2(0x2cc)][_0xca6043]),_0x1fc67e=this[_0x3e5ca2(0x24b)][_0x4aab15['level']]=this['_flags'][_0x4aab15[_0x3e5ca2(0x266)]]||[];_0x1fc67e[_0xca6043]=_0x1fc67e[_0xca6043]||[];let _0x2120fc=0x0;const _0x56efc3=_0x4d475d[_0x3e5ca2(0x289)];_0x56efc3!==undefined&&(_0x2120fc=this[_0x3e5ca2(0x2b3)](_0x4d475d[_0x3e5ca2(0x289)]),_0x1fc67e[_0xca6043]['push'](_0x2120fc));if(_0x4d475d[_0x3e5ca2(0x1f1)])_0x1fc67e[_0xca6043][_0x3e5ca2(0x226)](0x1<<0x5);if(_0x4d475d['bush'])_0x1fc67e[_0xca6043]['push'](0x1<<0x6);if(_0x4d475d['counter'])_0x1fc67e[_0xca6043][_0x3e5ca2(0x226)](0x1<<0x7);if(_0x4d475d[_0x3e5ca2(0x1c4)])_0x1fc67e[_0xca6043][_0x3e5ca2(0x226)](0x1<<0x8);_0x4d475d[_0x3e5ca2(0x1ef)]&&_0x1fc67e[_0xca6043]['push'](Number(_0x4d475d[_0x3e5ca2(0x1ef)])<<0xc);},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x227)]=function(_0xa22a7f,_0xd77d39){const _0x127330=_0x57f72e,_0x189a95=this['_collisionMap'][_0xa22a7f[_0x127330(0x266)]],_0x3e9a0f=_0xa22a7f[_0x127330(0x30f)];if(_0x3e9a0f){const _0x5d89f1=_0xa22a7f[_0x127330(0x2cc)][_0xd77d39],_0x76e57b=_0xd77d39;if(_0x3e9a0f==='tile-base'){const _0x467007=this[_0x127330(0x2ab)](_0x5d89f1);!!_0x467007[_0x127330(0x30f)]&&(_0x189a95[_0x76e57b][_0x127330(0x1af)]=parseInt(_0x467007[_0x127330(0x30f)]));}else!!_0x5d89f1&&(_0x189a95[_0x76e57b][_0x127330(0x1af)]=parseInt(_0x3e9a0f));}},Game_Map[_0x57f72e(0x1bf)]['_setupCollision']=function(_0x29ff05,_0x399383){const _0x2d5d6c=_0x57f72e,_0xefe55d=this[_0x2d5d6c(0x19a)][_0x29ff05['level']],_0x23df11=_0x29ff05[_0x2d5d6c(0x242)];if(_0x23df11){const _0x133d86=_0x399383,_0x34f005=_0x29ff05[_0x2d5d6c(0x2cc)][_0x399383];if(!!_0x34f005){let _0x5725d2=-0x1;switch(_0x23df11){case _0x2d5d6c(0x1ca):_0x5725d2=_0x133d86;break;case _0x2d5d6c(0x2fe):_0x5725d2=_0x133d86;break;case'up-right':_0x5725d2=_0x133d86+0x1;break;case _0x2d5d6c(0x2f4):_0x5725d2=_0x133d86+this['width'];break;case _0x2d5d6c(0x2c5):_0x5725d2=_0x133d86+this['width']+0x1;break;case _0x2d5d6c(0x2a1):const _0x4964f4=this[_0x2d5d6c(0x2ab)](_0x34f005);_0x4964f4[_0x2d5d6c(0x242)]===_0x2d5d6c(0x1ca)&&(_0x5725d2=_0x133d86);break;default:return![];}const _0x2fb421=_0xefe55d[_0x5725d2];if(_0x2fb421)_0x2fb421['full']=0x1;return!![];}}return![];},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1e7)]=function(_0x1b408d,_0x75934e){const _0x5743fc=_0x57f72e,_0x1913f8=this['_collisionMap'][_0x1b408d['level']],_0x368ac9=_0x1b408d[_0x5743fc(0x242)],_0x54fe07=_0x1b408d[_0x5743fc(0x289)],_0x131330=_0x1b408d[_0x5743fc(0x2cc)][_0x75934e],_0x2e2133=_0x75934e;let _0x408785=0x0;if(_0x368ac9||_0x54fe07){if(_0x368ac9===_0x5743fc(0x2a1)){const _0x21b4d5=this['_tileProperties'](_0x131330);if(!!_0x21b4d5[_0x5743fc(0x289)])return _0x408785=this['_arrowBit'](_0x21b4d5[_0x5743fc(0x289)]),_0x1913f8[_0x2e2133][_0x5743fc(0x263)]=_0x408785,!![];}else{if(!!_0x131330)return _0x408785=this['_arrowBit'](_0x54fe07),_0x1913f8[_0x2e2133][_0x5743fc(0x263)]=_0x408785,!![];}}return![];},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1ba)]=function(_0x593368,_0x22f606){const _0x526ce2=_0x57f72e,_0x530e37=this['_collisionMap'][_0x593368[_0x526ce2(0x266)]],_0x205747=_0x593368[_0x526ce2(0x21b)];if(_0x205747!==undefined){const _0x1021c5=_0x593368['data'][_0x22f606],_0x30d4fb=_0x22f606;if(_0x205747===_0x526ce2(0x2a1)){const _0x1aee0e=this[_0x526ce2(0x2ab)](_0x1021c5);if(_0x1aee0e[_0x526ce2(0x21b)]!==undefined)return _0x530e37[_0x30d4fb][_0x526ce2(0x21b)]=parseInt(_0x1aee0e['toLevel']),!![];}else{if(!!_0x1021c5)return _0x530e37[_0x22f606][_0x526ce2(0x21b)]=_0x205747,!![];}}return![];},Game_Map['prototype'][_0x57f72e(0x2ab)]=function(_0x597813){const _0x212eba=_0x57f72e,_0x2cc101=this['tiledData'][_0x212eba(0x1a8)],_0x2c608f=VisuMZ[_0x212eba(0x2e5)][_0x212eba(0x1e9)](_0x597813),_0x982c70=_0x2cc101[_0x2c608f];if(!_0x597813||!_0x982c70)return{};const _0x3d0d2c=_0x982c70[_0x212eba(0x28d)];if(!_0x3d0d2c)return{};const _0x5d3a1a=_0x597813-_0x982c70[_0x212eba(0x2dd)],_0x75f422=_0x982c70[_0x212eba(0x28d)][_0x5d3a1a];if(_0x75f422)return _0x75f422;return{};},Game_Map['prototype']['_arrowBit']=function(_0x285180){const _0x1517da=_0x57f72e;let _0x3e6413=0x0;const _0x2541f4=_0x285180[_0x1517da(0x1f8)]('&')[_0x1517da(0x2c0)](_0x8ca4e=>_0x8ca4e[_0x1517da(0x304)]()[_0x1517da(0x2ad)]());for(let _0x54ab4f=0x0;_0x54ab4f<_0x2541f4['length'];_0x54ab4f++){const _0x1fe766=_0x2541f4[_0x54ab4f];if(_0x1fe766===_0x1517da(0x1d1))_0x3e6413^=0x2;else{if(_0x1fe766==='down')_0x3e6413^=0x1;else{if(_0x1fe766===_0x1517da(0x2f8))_0x3e6413^=0x4;else _0x1fe766==='up'&&(_0x3e6413^=0x8);}}}return _0x3e6413;},VisuMZ['TiledMZ']['Game_Map_checkPassage']=Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1ee)],Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1ee)]=function(_0x5f114d,_0x4b83c8,_0x124687){const _0x27c305=_0x57f72e;if(!this[_0x27c305(0x1bc)]())return VisuMZ[_0x27c305(0x2e5)]['Game_Map_checkPassage'][_0x27c305(0x1a2)](this,_0x5f114d,_0x4b83c8,_0x124687);if(!this['checkPassageCollision'](_0x5f114d,_0x4b83c8,_0x124687))return![];return this[_0x27c305(0x262)](_0x5f114d,_0x4b83c8,_0x124687);},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x2dc)]=function(_0x15cb10,_0x5ae609,_0x45a509){const _0x34e384=_0x57f72e,_0x3a12ed=this['_collisionMap'][this['currentMapLevel']];if(_0x3a12ed){const _0x59434b=_0x15cb10+this[_0x34e384(0x269)]()*_0x5ae609,_0x557e10=_0x3a12ed[_0x59434b]?_0x3a12ed[_0x59434b]['arrow']:null;if(_0x557e10)return this[_0x34e384(0x219)](_0x557e10,_0x45a509);return _0x3a12ed[_0x59434b]?_0x3a12ed[_0x59434b][_0x34e384(0x1ca)]===0x0:!![];}return!![];},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x262)]=function(_0x26b7e0,_0x291c25,_0x4ccb1c){const _0x13a8cf=_0x57f72e,_0xab8733=this['layeredTiles'](_0x26b7e0,_0x291c25);if(!_0xab8733)return![];let _0x58fe5b=!![];for(let _0x1e76cf=_0xab8733[_0x13a8cf(0x28a)];_0x1e76cf>0x0;_0x1e76cf--){const _0x243e52=_0xab8733[_0x1e76cf];_0x58fe5b=this[_0x13a8cf(0x219)](_0x243e52,_0x4ccb1c);if(_0x58fe5b!==undefined&&!_0x58fe5b)return _0x58fe5b;}return _0x58fe5b;},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x219)]=function(_0x11b36b,_0x22f680){if((_0x11b36b&0x10)!==0x0)return undefined;if((_0x11b36b&_0x22f680)===0x0)return!![];if((_0x11b36b&_0x22f680)===_0x22f680)return![];},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x1f5)]=Game_Map['prototype'][_0x57f72e(0x211)],Game_Map[_0x57f72e(0x1bf)]['tileWidth']=function(){const _0x21f4e3=_0x57f72e;if(!this[_0x21f4e3(0x1bc)]())return VisuMZ[_0x21f4e3(0x2e5)][_0x21f4e3(0x1f5)]['call'](this);return this[_0x21f4e3(0x2a9)][_0x21f4e3(0x1bd)];},VisuMZ[_0x57f72e(0x2e5)]['Game_Map_tileHeight']=Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x265)],Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x265)]=function(){const _0x457837=_0x57f72e;if(!this[_0x457837(0x1bc)]())return VisuMZ[_0x457837(0x2e5)][_0x457837(0x259)][_0x457837(0x1a2)](this);return this[_0x457837(0x2a9)][_0x457837(0x314)];},VisuMZ[_0x57f72e(0x2e5)]['Game_Map_width']=Game_Map[_0x57f72e(0x1bf)]['width'],Game_Map['prototype'][_0x57f72e(0x269)]=function(){const _0x46faaf=_0x57f72e;if(!this[_0x46faaf(0x1bc)]())return VisuMZ['TiledMZ'][_0x46faaf(0x268)][_0x46faaf(0x1a2)](this);return this[_0x46faaf(0x2a9)][_0x46faaf(0x269)];},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x249)]=Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x26e)],Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x26e)]=function(){const _0x3326d8=_0x57f72e;if(!this[_0x3326d8(0x1bc)]())return VisuMZ[_0x3326d8(0x2e5)][_0x3326d8(0x249)][_0x3326d8(0x1a2)](this);return this[_0x3326d8(0x2a9)][_0x3326d8(0x26e)];},VisuMZ['TiledMZ'][_0x57f72e(0x316)]=Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x29e)],Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x29e)]=function(_0x5cab80,_0x5b18e5){const _0x3e7b23=_0x57f72e;if(!this[_0x3e7b23(0x1bc)]())return VisuMZ[_0x3e7b23(0x2e5)][_0x3e7b23(0x316)]['call'](this,_0x5cab80,_0x5b18e5);const _0x1a7aa7=_0x5cab80+this[_0x3e7b23(0x269)]()*_0x5b18e5,_0x23e2e1=this[_0x3e7b23(0x305)]();return _0x23e2e1[_0x3e7b23(0x28a)]>0x0?_0x23e2e1[_0x1a7aa7]:[];},VisuMZ['TiledMZ']['Game_Map_checkLayeredTilesFlags']=Game_Map['prototype'][_0x57f72e(0x236)],Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x236)]=function(_0x569cb7,_0x3f0f57,_0x399e5a){const _0x50e5e4=_0x57f72e;if(!this[_0x50e5e4(0x1bc)]())return VisuMZ[_0x50e5e4(0x2e5)][_0x50e5e4(0x1eb)][_0x50e5e4(0x1a2)](this,_0x569cb7,_0x3f0f57,_0x399e5a);return this['layeredTiles'](_0x569cb7,_0x3f0f57)[_0x50e5e4(0x1d2)](_0x2563bd=>(_0x2563bd&_0x399e5a)!==0x0);},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x1da)]=Game_Map['prototype'][_0x57f72e(0x305)],Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x305)]=function(){const _0x385c84=_0x57f72e;if(!this[_0x385c84(0x1bc)]())return VisuMZ[_0x385c84(0x2e5)][_0x385c84(0x1da)]['call'](this);const _0xdd712a=this['_flags'][this[_0x385c84(0x2f0)]];return _0xdd712a?_0xdd712a:[];},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x26f)]=Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1ef)],Game_Map[_0x57f72e(0x1bf)]['terrainTag']=function(_0x341a2c,_0x24172f){const _0x307f85=_0x57f72e;if(!this[_0x307f85(0x1bc)]())return VisuMZ[_0x307f85(0x2e5)]['Game_Map_terrainTag'][_0x307f85(0x1a2)](this,_0x341a2c,_0x24172f);if(this[_0x307f85(0x197)](_0x341a2c,_0x24172f)){const _0x198e05=this[_0x307f85(0x29e)](_0x341a2c,_0x24172f);if(_0x198e05)for(const _0x5a62be of _0x198e05){const _0x9fde8b=_0x5a62be>>0xc;if(_0x9fde8b>0x0)return _0x9fde8b;}}return 0x0;},VisuMZ['TiledMZ']['Game_Map_regionId']=Game_Map['prototype'][_0x57f72e(0x30f)],Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x30f)]=function(_0x58b122,_0x46dcf4){const _0x2dbb1b=_0x57f72e;if(!this[_0x2dbb1b(0x1bc)]())return VisuMZ[_0x2dbb1b(0x2e5)][_0x2dbb1b(0x1e8)]['call'](this,_0x58b122,_0x46dcf4);const _0x5ab8e7=this[_0x2dbb1b(0x19a)][this[_0x2dbb1b(0x2f0)]],_0x53021b=_0x58b122+this[_0x2dbb1b(0x269)]()*_0x46dcf4;return _0x5ab8e7[_0x53021b]['region'];},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x254)]=function(_0x3c306d,_0x101968){const _0x965cb0=_0x57f72e,_0x3dcccf=this[_0x965cb0(0x19a)][this['currentMapLevel']];if(_0x3dcccf){const _0x4ba29a=_0x3c306d+this[_0x965cb0(0x269)]()*_0x101968;if(_0x3dcccf[_0x4ba29a][_0x965cb0(0x21b)]<0x0)return![];return this[_0x965cb0(0x2f0)]=_0x3dcccf[_0x4ba29a][_0x965cb0(0x21b)],!![];}},Game_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1c8)]=function(_0xa6750b){const _0x49dcd9=_0x57f72e,_0x2c0dbd=this['tiledData'][_0x49dcd9(0x301)];for(const _0x5ed21e of _0x2c0dbd){if(_0x5ed21e[_0x49dcd9(0x279)]===_0x49dcd9(0x261))for(const _0x1bafa6 of _0x5ed21e[_0x49dcd9(0x20a)]){const _0xecae2c=_0x1bafa6[_0x49dcd9(0x28c)];if(!_0xecae2c)continue;const _0x282e36=_0xecae2c[_0x49dcd9(0x205)](_0x2ffc29=>_0x2ffc29['name'][_0x49dcd9(0x2ad)]()==='eventid');if(!_0x282e36)continue;if(parseInt(_0x282e36[_0x49dcd9(0x1c3)])===_0xa6750b){const _0x10bbfe=Math['floor'](_0x1bafa6['x']/this[_0x49dcd9(0x211)]()),_0x31cb83=Math[_0x49dcd9(0x223)](_0x1bafa6['y']/this['tileHeight']());return[_0x10bbfe,_0x31cb83];}}}return undefined;},VisuMZ['TiledMZ']['Game_CharacterBase_initMembers']=Game_CharacterBase[_0x57f72e(0x1bf)][_0x57f72e(0x1e1)],Game_CharacterBase['prototype'][_0x57f72e(0x1e1)]=function(){const _0x2b9e5d=_0x57f72e;VisuMZ[_0x2b9e5d(0x2e5)][_0x2b9e5d(0x2eb)]['call'](this),this[_0x2b9e5d(0x312)]=[],this[_0x2b9e5d(0x19f)]=[];},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x1f6)]=Game_CharacterBase[_0x57f72e(0x1bf)][_0x57f72e(0x298)],Game_CharacterBase[_0x57f72e(0x1bf)]['update']=function(){const _0x5042d8=_0x57f72e;VisuMZ[_0x5042d8(0x2e5)][_0x5042d8(0x1f6)][_0x5042d8(0x1a2)](this),this['updateReflection'](),this[_0x5042d8(0x24d)]();},Game_CharacterBase[_0x57f72e(0x1bf)][_0x57f72e(0x288)]=function(){const _0x2dc55a=_0x57f72e;if(!$gameMap[_0x2dc55a(0x20c)](this)){this[_0x2dc55a(0x312)]=[];return;}this[_0x2dc55a(0x312)]=$gameMap[_0x2dc55a(0x2b8)](this);},Game_CharacterBase[_0x57f72e(0x1bf)][_0x57f72e(0x24d)]=function(){const _0x3aa318=_0x57f72e;if(!$gameMap['isInfrontOfMirror'](this)){this['mirrors']=[];return;}this['mirrors']=$gameMap[_0x3aa318(0x1a3)](this);},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x2e8)]=Game_CharacterBase[_0x57f72e(0x1bf)]['refreshBushDepth'],Game_CharacterBase[_0x57f72e(0x1bf)]['refreshBushDepth']=function(){const _0x4e0e65=_0x57f72e;VisuMZ[_0x4e0e65(0x2e5)][_0x4e0e65(0x2e8)][_0x4e0e65(0x1a2)](this),this[_0x4e0e65(0x23a)]()&&!this['isObjectCharacter']()&&this[_0x4e0e65(0x21c)]()&&!this[_0x4e0e65(0x26c)]()?!this['isMoving']()&&(this[_0x4e0e65(0x1e0)]=VisuMZ[_0x4e0e65(0x2e5)][_0x4e0e65(0x213)][_0x4e0e65(0x1b4)]):this[_0x4e0e65(0x1e0)]=0x0;},VisuMZ[_0x57f72e(0x2e5)]['Game_Player_checkEventTriggerHere']=Game_Player[_0x57f72e(0x1bf)][_0x57f72e(0x25c)],Game_Player['prototype']['checkEventTriggerHere']=function(_0x2d5190){const _0x397e52=_0x57f72e;VisuMZ[_0x397e52(0x2e5)][_0x397e52(0x1d6)][_0x397e52(0x1a2)](this,_0x2d5190),$gameMap[_0x397e52(0x254)](this['x'],this['y']);},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x1ae)]=Game_Event[_0x57f72e(0x1bf)]['initialize'],Game_Event[_0x57f72e(0x1bf)]['initialize']=function(_0x1634c2,_0x43f429){const _0x5ca676=_0x57f72e;VisuMZ[_0x5ca676(0x2e5)][_0x5ca676(0x1ae)]['call'](this,_0x1634c2,_0x43f429);const _0x460d76=$gameMap[_0x5ca676(0x1c8)](_0x43f429);_0x460d76!==undefined&&(this[_0x5ca676(0x251)](_0x460d76[0x0],_0x460d76[0x1]),this[_0x5ca676(0x2c6)]());},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x1dc)]=Sprite_Character[_0x57f72e(0x1bf)]['initMembers'],Sprite_Character[_0x57f72e(0x1bf)][_0x57f72e(0x1e1)]=function(){const _0x434cdb=_0x57f72e;VisuMZ[_0x434cdb(0x2e5)][_0x434cdb(0x1dc)][_0x434cdb(0x1a2)](this),this[_0x434cdb(0x250)]=0x1;};function Sprite_CharacterReflection(){const _0x14d0d1=_0x57f72e;this[_0x14d0d1(0x309)](...arguments);}function _0x66d7(){const _0x593726=['_paintTile','getReflections','multiply','verticalWrap','objectlayer','normal','onXhrMapDataLoad','children','zIndex','map','_margin','isMapLoaded','ConvertParams','PictureID','down-right','refresh','.json','_zIndex','offsety','hiddenInGame','horizontalWrap','data','Spriteset_Map_createTilemap','remove','origY','_tileId','Point','error','6789046GfyPWg','strToBlendMode','clear','_priorityTilesCount','offsetX','source','alpha','tileid','onXhrError','checkPassageCollision','firstgid','flipHorz','_getAnimationTileId','5954706eTNvAw','_onBitmapChange','_pictureContainer','max','updateAnim','TiledMZ','_objectSprites','setFrame','Game_CharacterBase_refreshBushDepth','propertyValue','speedY','Game_CharacterBase_initMembers','NORMAL','displayY','removeChild','_tiledObjects','currentMapLevel','opacity','updateTransform','_reflectionSprites','down-left','shift','_setupTileFlags','_id','right','Mirror\x20Property\x20Format\x20on\x20Object\x20is\x20in\x20the\x20incorrect\x20format.\x20Format\x20should\x20be:\x20x,y','_scrollY','status','onXhrTilesetLoad','responseText','up-left','layerFromId','loadMapData','layers','SUBTRACT','tilelayer','trim','tilesetFlags','texture','VERTEX_STRIDE','hideOnLevel','initialize','updateTileset','mirrorCast','_character','ceil','VisuMZ_1_EventsMoveCore','regionId','filter','isPaintableLayer','reflections','Normal','tileheight','_loadedMapId','Game_Map_layeredTiles','createTiledImages','4112010TUPqzD','_sortChildren','_addAllSpots','addLoadListener','_vertexBuffer','54rwpJul','_setupTiledMirrors','mod','isValid','constructor','_tileset','_collisionMap','_updateBitmaps','description','_mirrors','_baseSprite','mirrors','_priority','animation','call','getMirrors','27SlJccL','_layerHeight','setBitmaps','Scene_Map_isReady','tilesets','screenZ','layerData','_setupTiledObjects','_objectsCreated','_characterSprites','Game_Event_initialize','region','trimExt','isPriorityTile','_textureId','maxFrame','BushDepth','_updateID','_tilemap','tilingTexture','Priority\x20Property\x20on\x20layer\x20%s\x20is\x20Not-A-Number.','number','_setupMapLevel','1650370hvrrhS','isTiled','tilewidth','_lastStartY','prototype','onload','origin','_layerWidth','value','damage','bind','_realY','create','tiledEventLocation','_gid','full','rotationInit','createSpriteObjects','onerror','parse','Layer','_data','left','some','_setupTileProperties','_onBitmapLoad','createShadows','Game_Player_checkEventTriggerHere','layerId','pivot','application/json','Game_Map_tilesetFlags','characterPatternY','Sprite_Character_initMmebers','_spriteset','blendMode','ZIndex\x20Property\x20on\x20layer\x20%s\x20is\x20Not-A-Number.','_bushDepth','initMembers','getTilesetProperties','_image','columns','loadTileset','_setupAnim','_setupCollisionArrow','Game_Map_regionId','getTextureId','reflectionCast','Game_Map_checkLayeredTilesFlags','cos','offsetx','checkPassage','terrainTag','frame','ladder','_updateAnimation','_pictureId','_state','Game_Map_tileWidth','Game_CharacterBase_update','Spriteset_Map_loadTileset','split','Spriteset_Map_createLowerLayer','scrollY','932RmwPHd','_setupSize','isLoopVertical','_needsBitmapsUpdate','_setupLayerProperties','registerCommand','_tileData','_paintPriorityTile','animationFrame','isInfrontOfMirror','find','updatePosition','_setupCompleted','version','name','objects','spriteId','isOnReflection','duration','_needsRepaint','imageName','_scene','tileWidth','MapLevel','Settings','_tiledLoaded','_tileHeight','_lastAnimationFrame','group','anchor','isFlagPassable','_lastStartX','toLevel','isOnBush','Sprite_CharacterReflection_characterPatternY','isReflectionLayer','isTiledObjectsCreated','_displayX','_mapHeight','BLEND_MODES','floor','send','tiles','push','_setupRegions','createTiledObject','setupTiledMap','gid','scrollX','maxDuration','_elements','sin','_frame','match','offset','scale','loadTiledParallax','clone','rotation','checkLayeredTilesFlags','Container','%1\x27s\x20version\x20does\x20not\x20match\x20plugin\x27s.\x20Please\x20update\x20it\x20in\x20the\x20Plugin\x20Manager.','image','isNormalPriority','./maps/','_priorityTiles','_emptyBitmap','speedX','subtract','addRect','imageFolder','collision','547312wwKrdT','recursiveExtractLayers','Spriteset_Map_updateTileset','GET','Spriteset_Map_update','_mapId','Game_Map_height','_tileWidth','_flags','_realX','updateMirrors','parseTiledData','exit','priority','locate','3327mgzIet','lockLocation','checkMapLevelChanging','_tilesetToLoad','_bitmap','renderable','_tiledData','Game_Map_tileHeight','_setupTiledReflection','true','checkEventTriggerHere','add','join','_updateVertexBuffer','_mapWidth','objectgroup','checkPassageFlags','arrow','screenY','tileHeight','level','_setupImages','Game_Map_width','width','_animData','imagelayer','isJumping','Game_Map_setup','height','Game_Map_terrainTag','includes','_animationData','_layers','_imageInfo','tilecount','_reflection','rect','ignore','groupD8','type','hide','displayX','loadBitmap','string','overrideMimeType','_setupTiled','screen','loadTiledMapData','setup','format','addChild','DataManager_isMapLoaded','bitmap','visible','updateReflection','arrowImpassable','length','open','properties','tileProperties','_vertexArray','_refresh','_updateLayerPositions','isValidReflection','ADD','_paintLayerTiles','_scrollX','7791FZpwUE','./maps/Map','SCREEN','update','direction','_speedY','isReady','98eskRum','%1\x20is\x20missing\x20a\x20required\x20plugin.\x0aPlease\x20install\x20%2\x20into\x20the\x20Plugin\x20Manager.','layeredTiles','mirror','loadTilesetData','tile-base','createLowerLayer','pop','flipVert','set','_bitmaps','baseTexture','_initializeMapLevel','tiledData','_setupTiledLayerData','_tileProperties','_lockLocation','toLowerCase','_tempTiledData','origX','_setup','makeColliderTile','DataManager_loadMapData','_arrowBit','offsetY','mirrorY','values'];_0x66d7=function(){return _0x593726;};return _0x66d7();}Sprite_CharacterReflection['prototype']=Object[_0x57f72e(0x1c7)](Sprite_Character[_0x57f72e(0x1bf)]),Sprite_CharacterReflection['prototype'][_0x57f72e(0x198)]=Sprite_CharacterReflection,Sprite_CharacterReflection['prototype'][_0x57f72e(0x1e1)]=function(){const _0x2dff49=_0x57f72e;Sprite_Character['prototype'][_0x2dff49(0x1e1)][_0x2dff49(0x1a2)](this),this[_0x2dff49(0x287)]=![],this[_0x2dff49(0x1d0)]=null;},VisuMZ['TiledMZ'][_0x57f72e(0x21d)]=Sprite_CharacterReflection['prototype'][_0x57f72e(0x1db)],Sprite_CharacterReflection[_0x57f72e(0x1bf)][_0x57f72e(0x1db)]=function(){const _0x55eabb=_0x57f72e,_0x274c0b=this[_0x55eabb(0x1d0)][_0x55eabb(0x1ea)];if(_0x274c0b!==undefined||this[_0x55eabb(0x30c)]['isObjectCharacter']())return VisuMZ['TiledMZ'][_0x55eabb(0x21d)]['call'](this);let _0x4224d6=this[_0x55eabb(0x30c)][_0x55eabb(0x299)]();switch(_0x4224d6){case 0x2:_0x4224d6=0x8;break;case 0x4:_0x4224d6=0x6;break;case 0x6:_0x4224d6=0x4;break;case 0x8:_0x4224d6=0x2;break;}return(_0x4224d6-0x2)/0x2;},Sprite_CharacterReflection[_0x57f72e(0x1bf)]['setup']=function(_0x7a9aa){const _0x3d2d7f=_0x57f72e;if(!_0x7a9aa)return;this[_0x3d2d7f(0x1d0)]=_0x7a9aa,this['z']=_0x7a9aa[_0x3d2d7f(0x2bf)]||this['_character'][_0x3d2d7f(0x1a9)](),this['priority']=_0x7a9aa['priority']||0x0,this[_0x3d2d7f(0x232)]['y']=typeof _0x7a9aa['reflectionCast']===_0x3d2d7f(0x1b9)&&_0x7a9aa[_0x3d2d7f(0x1ea)]>0x0?-0x1:0x1,this[_0x3d2d7f(0x232)]['x']=_0x7a9aa[_0x3d2d7f(0x1ea)]===undefined?-0x1:0x1,this['opacity']=_0x7a9aa[_0x3d2d7f(0x2f1)],typeof _0x7a9aa[_0x3d2d7f(0x1de)]===_0x3d2d7f(0x27d)?this[_0x3d2d7f(0x1de)]=VisuMZ[_0x3d2d7f(0x2e5)][_0x3d2d7f(0x2d4)](_0x7a9aa[_0x3d2d7f(0x1de)]):this[_0x3d2d7f(0x1de)]=PIXI[_0x3d2d7f(0x222)][_0x3d2d7f(0x2ec)];},Sprite_CharacterReflection[_0x57f72e(0x1bf)][_0x57f72e(0x298)]=function(){const _0x145835=_0x57f72e;Sprite_Character[_0x145835(0x1bf)][_0x145835(0x298)][_0x145835(0x1a2)](this),this[_0x145835(0x2f1)]=this[_0x145835(0x1d0)][_0x145835(0x2f1)],this[_0x145835(0x232)]['x']=this['_data'][_0x145835(0x1ea)]===undefined?-0x1:0x1,typeof this[_0x145835(0x1d0)][_0x145835(0x1de)]===_0x145835(0x27d)?this[_0x145835(0x1de)]=VisuMZ[_0x145835(0x2e5)][_0x145835(0x2d4)](this[_0x145835(0x1d0)][_0x145835(0x1de)]):this[_0x145835(0x1de)]=PIXI[_0x145835(0x222)][_0x145835(0x2ec)];},Sprite_CharacterReflection['prototype'][_0x57f72e(0x291)]=function(){const _0x30f282=_0x57f72e;if(!this[_0x30f282(0x1d0)])return![];if(!this[_0x30f282(0x1d0)]['rect'])return![];const _0x1adda3=this[_0x30f282(0x1d0)],_0x113779=this['_character'][_0x30f282(0x24c)]*$gameMap[_0x30f282(0x211)]();let _0xd5b4eb=(this['_character']['_realY']-0x1)*$gameMap[_0x30f282(0x265)]();if(_0x1adda3[_0x30f282(0x1ea)]!==undefined)_0xd5b4eb=this['_character']['_realY']*$gameMap[_0x30f282(0x265)]();const _0x3c8487=_0x1adda3[_0x30f282(0x276)],_0x2cfb1a=_0x113779>=_0x3c8487['x']&&_0x113779<_0x3c8487['x']+_0x3c8487[_0x30f282(0x269)]-$gameMap[_0x30f282(0x211)]()*0.8,_0x3ac2e9=_0xd5b4eb>=_0x3c8487['y']&&_0xd5b4eb<_0x3c8487['y']+_0x3c8487[_0x30f282(0x26e)];if(_0x2cfb1a&&_0x3ac2e9)return!![];return![];},Sprite_CharacterReflection[_0x57f72e(0x1bf)][_0x57f72e(0x206)]=function(){const _0x1a9732=_0x57f72e,_0xb80666=this[_0x1a9732(0x1d0)];this['x']=this[_0x1a9732(0x30c)]['screenX'](),this['y']=this['_character']['screenY'](),_0xb80666['reflectionCast']!==undefined?(this['y']+=$gameMap[_0x1a9732(0x265)]()*_0xb80666[_0x1a9732(0x1ea)],_0xb80666['reflectionCast']>0x0&&(this['y']-=$gameMap[_0x1a9732(0x265)]())):(this['x']+=_0xb80666['mirrorX']*$gameMap[_0x1a9732(0x211)](),this['y']+=_0xb80666[_0x1a9732(0x2b5)]*$gameMap['tileHeight']());},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x2cd)]=Spriteset_Map[_0x57f72e(0x1bf)]['createTilemap'],Spriteset_Map[_0x57f72e(0x1bf)]['createTilemap']=function(){const _0x2f285d=_0x57f72e;if(!$gameMap['isTiled']())return VisuMZ[_0x2f285d(0x2e5)][_0x2f285d(0x2cd)][_0x2f285d(0x1a2)](this);const _0x452103=new TiledTilemap($gameMap['tiledData']);this[_0x2f285d(0x19e)][_0x2f285d(0x284)](_0x452103),this[_0x2f285d(0x1b6)]=_0x452103,this['_effectsContainer']=_0x452103,this[_0x2f285d(0x2f3)]=[];},VisuMZ['TiledMZ'][_0x57f72e(0x1f7)]=Spriteset_Map['prototype'][_0x57f72e(0x1e5)],Spriteset_Map['prototype'][_0x57f72e(0x1e5)]=function(){const _0xe1fe28=_0x57f72e;if(!$gameMap[_0xe1fe28(0x1bc)]())return VisuMZ[_0xe1fe28(0x2e5)]['Spriteset_Map_loadTileset'][_0xe1fe28(0x1a2)](this);const _0x327819=[];for(const _0x4d021d of $gameMap['tiledData']['tilesets']){_0x327819[_0xe1fe28(0x226)](ImageManager['loadTiledTileset'](_0x4d021d['image']));}this[_0xe1fe28(0x1b6)][_0xe1fe28(0x1a6)](_0x327819),this['_tileset']=$gameMap[_0xe1fe28(0x2a9)][_0xe1fe28(0x1a8)];},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x245)]=Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x30a)],Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x30a)]=function(){const _0x2cef88=_0x57f72e;if(!$gameMap['isTiled']())return VisuMZ[_0x2cef88(0x2e5)][_0x2cef88(0x245)][_0x2cef88(0x1a2)](this);this[_0x2cef88(0x199)]!==$gameMap['tiledData'][_0x2cef88(0x1a8)]&&this[_0x2cef88(0x1e5)]();},VisuMZ[_0x57f72e(0x2e5)]['Spriteset_Map_createLowerLayer']=Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x2a2)],Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x2a2)]=function(){const _0x35be72=_0x57f72e;VisuMZ[_0x35be72(0x2e5)][_0x35be72(0x1f9)][_0x35be72(0x1a2)](this),this[_0x35be72(0x317)]();},Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x317)]=function(){const _0x92516c=_0x57f72e;for(const _0x2a6cd6 of $gameMap[_0x92516c(0x273)]){const _0x342154=new TiledTilingSprite(_0x2a6cd6);this['_tilemap'][_0x92516c(0x284)](_0x342154);}},Spriteset_Map[_0x57f72e(0x1bf)]['isTiledObjectsReady']=function(){const _0x2fa6fa=_0x57f72e;return $gameMap[_0x2fa6fa(0x1bc)]()?this[_0x2fa6fa(0x1b6)][_0x2fa6fa(0x21f)]():!![];},VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x247)]=Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x298)],Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x298)]=function(){const _0x100560=_0x57f72e;VisuMZ['TiledMZ'][_0x100560(0x247)][_0x100560(0x1a2)](this);for(const _0xd41e47 of this[_0x100560(0x1ad)]){if(!_0xd41e47[_0x100560(0x30c)]['mirrors'])_0xd41e47[_0x100560(0x30c)][_0x100560(0x19f)]=[];for(const _0x47a501 of _0xd41e47[_0x100560(0x30c)][_0x100560(0x19f)]){if(this['_reflectionSprites']['find'](_0x3dd0dc=>_0x3dd0dc['_data']&&_0x3dd0dc[_0x100560(0x1d0)][_0x100560(0x1ea)]===undefined&&_0x3dd0dc[_0x100560(0x1d0)]['id']===_0x47a501['id']&&_0x3dd0dc[_0x100560(0x30c)]===_0xd41e47['_character']))continue;const _0x1c126c=new Sprite_CharacterReflection(_0xd41e47['_character']);_0x1c126c[_0x100560(0x282)](_0x47a501),this[_0x100560(0x2f3)]['push'](_0x1c126c),this[_0x100560(0x1b6)][_0x100560(0x284)](_0x1c126c);}if(!_0xd41e47[_0x100560(0x30c)]['reflections'])_0xd41e47[_0x100560(0x30c)]['reflections']=[];for(const _0x906a98 of _0xd41e47[_0x100560(0x30c)]['reflections']){if(this[_0x100560(0x2f3)][_0x100560(0x205)](_0x562dae=>_0x562dae[_0x100560(0x1d0)]&&_0x562dae[_0x100560(0x1d0)][_0x100560(0x1ea)]!==undefined&&_0x562dae[_0x100560(0x1d0)]['id']===_0x906a98['id']&&_0x562dae[_0x100560(0x30c)]===_0xd41e47[_0x100560(0x30c)]))continue;const _0x2a6872=new Sprite_CharacterReflection(_0xd41e47[_0x100560(0x30c)]);_0x2a6872[_0x100560(0x282)](_0x906a98),this['_reflectionSprites'][_0x100560(0x226)](_0x2a6872),this[_0x100560(0x1b6)][_0x100560(0x284)](_0x2a6872);}}for(const _0x3dc8c0 of this[_0x100560(0x2f3)]){!_0x3dc8c0[_0x100560(0x291)]()&&(this[_0x100560(0x2f3)][_0x100560(0x2ce)](_0x3dc8c0),this[_0x100560(0x1b6)]['removeChild'](_0x3dc8c0),delete _0x3dc8c0);}};Imported[_0x57f72e(0x30e)]&&(VisuMZ[_0x57f72e(0x2e5)]['Spriteset_Map_createShadows']=Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1d5)],Spriteset_Map[_0x57f72e(0x1bf)][_0x57f72e(0x1d5)]=function(){});function _0x35ef(_0x4a423a,_0x2beb1c){const _0x66d700=_0x66d7();return _0x35ef=function(_0x35effe,_0x47d3e9){_0x35effe=_0x35effe-0x192;let _0x56c7c6=_0x66d700[_0x35effe];return _0x56c7c6;},_0x35ef(_0x4a423a,_0x2beb1c);}VisuMZ[_0x57f72e(0x2e5)][_0x57f72e(0x1a7)]=Scene_Map['prototype'][_0x57f72e(0x29b)],Scene_Map[_0x57f72e(0x1bf)][_0x57f72e(0x29b)]=function(){const _0x1d59b7=_0x57f72e;return VisuMZ[_0x1d59b7(0x2e5)][_0x1d59b7(0x1a7)][_0x1d59b7(0x1a2)](this)&&this[_0x1d59b7(0x1dd)]['isTiledObjectsReady']();};

//=============================================================================
// End of File
//=============================================================================